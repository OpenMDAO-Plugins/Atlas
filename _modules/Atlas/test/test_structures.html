<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Atlas.test.test_structures &mdash; Atlas 0.1 documentation</title>
    
    <link rel="stylesheet" href="../../../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../',
        VERSION:     '0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../_static/doctools.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="Atlas 0.1 documentation" href="../../../index.html" />
    <link rel="up" title="Module code" href="../../index.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li><a href="../../../index.html">Atlas 0.1 documentation</a> &raquo;</li>
          <li><a href="../../index.html" accesskey="U">Module code</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <h1>Source code for Atlas.test.test_structures</h1><div class="highlight"><pre>
<span class="kn">from</span> <span class="nn">Atlas</span> <span class="kn">import</span> <span class="n">Flags</span><span class="p">,</span> <span class="n">JointProperties</span><span class="p">,</span> <span class="n">PrescribedLoad</span><span class="p">,</span> <span class="n">Fblade</span><span class="p">,</span> <span class="n">Strain</span><span class="p">,</span> \
                  <span class="n">MassProperties</span><span class="p">,</span> <span class="n">FEM</span><span class="p">,</span> <span class="n">Strains</span><span class="p">,</span> <span class="n">Failures</span><span class="p">,</span> <span class="n">Structures</span>

<span class="kn">import</span> <span class="nn">os</span>

<span class="kn">from</span> <span class="nn">scipy.io</span> <span class="kn">import</span> <span class="n">loadmat</span>

<span class="kn">import</span> <span class="nn">unittest</span>


<div class="viewcode-block" id="TestStructures"><a class="viewcode-back" href="../../../srcdocs.html#Atlas.test.test_structures.TestStructures">[docs]</a><span class="k">class</span> <span class="nc">TestStructures</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>

<div class="viewcode-block" id="TestStructures.setUp"><a class="viewcode-back" href="../../../srcdocs.html#Atlas.test.test_structures.TestStructures.setUp">[docs]</a>    <span class="k">def</span> <span class="nf">setUp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">pass</span>
</div>
<div class="viewcode-block" id="TestStructures.tearDown"><a class="viewcode-back" href="../../../srcdocs.html#Atlas.test.test_structures.TestStructures.tearDown">[docs]</a>    <span class="k">def</span> <span class="nf">tearDown</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">pass</span>
</div>
<div class="viewcode-block" id="TestStructures.test_Mass"><a class="viewcode-back" href="../../../srcdocs.html#Atlas.test.test_structures.TestStructures.test_Mass">[docs]</a>    <span class="k">def</span> <span class="nf">test_Mass</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; test of mass properties calculations &quot;&quot;&quot;</span>
        <span class="n">comp</span> <span class="o">=</span> <span class="n">MassProperties</span><span class="p">()</span>

        <span class="n">path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">__file__</span><span class="p">),</span> <span class="s">&#39;mass.mat&#39;</span><span class="p">)</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">loadmat</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">struct_as_record</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">mat_dtype</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

        <span class="c"># populate inputs</span>
        <span class="n">comp</span><span class="o">.</span><span class="n">flags</span> <span class="o">=</span> <span class="n">Flags</span><span class="p">()</span>
        <span class="n">comp</span><span class="o">.</span><span class="n">flags</span><span class="o">.</span><span class="n">Load</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s">&#39;flags&#39;</span><span class="p">][</span><span class="s">&#39;Cover&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">comp</span><span class="o">.</span><span class="n">flags</span><span class="o">.</span><span class="n">wingWarp</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s">&#39;flags&#39;</span><span class="p">][</span><span class="s">&#39;Quad&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>

        <span class="n">comp</span><span class="o">.</span><span class="n">b</span>        <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>

        <span class="n">comp</span><span class="o">.</span><span class="n">mSpar</span>    <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s">&#39;mSpar&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
        <span class="n">comp</span><span class="o">.</span><span class="n">mChord</span>   <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s">&#39;mChord&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
        <span class="n">comp</span><span class="o">.</span><span class="n">xCGChord</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s">&#39;xCGChord&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
        <span class="n">comp</span><span class="o">.</span><span class="n">xEA</span>      <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s">&#39;xEA&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
        <span class="n">comp</span><span class="o">.</span><span class="n">mQuad</span>    <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s">&#39;mQuad&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>

        <span class="n">comp</span><span class="o">.</span><span class="n">ycmax</span>    <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s">&#39;ycmax&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>

        <span class="n">comp</span><span class="o">.</span><span class="n">yWire</span>    <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s">&#39;yWire&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">comp</span><span class="o">.</span><span class="n">zWire</span>    <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s">&#39;zWire&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">comp</span><span class="o">.</span><span class="n">tWire</span>    <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s">&#39;tWire&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">comp</span><span class="o">.</span><span class="n">RHOWire</span>  <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s">&#39;RHOWire&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>

        <span class="n">comp</span><span class="o">.</span><span class="n">mElseRotor</span>  <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s">&#39;mElseRotor&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">comp</span><span class="o">.</span><span class="n">mElseCentre</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s">&#39;mElseCentre&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">comp</span><span class="o">.</span><span class="n">mElseR</span>      <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s">&#39;mElseR&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">comp</span><span class="o">.</span><span class="n">R</span>           <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s">&#39;R&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">comp</span><span class="o">.</span><span class="n">mPilot</span>      <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s">&#39;mPilot&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>

        <span class="c"># run</span>
        <span class="n">comp</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>

        <span class="c"># check outputs</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEquals</span><span class="p">(</span><span class="n">comp</span><span class="o">.</span><span class="n">Mtot</span><span class="p">,</span> <span class="n">data</span><span class="p">[</span><span class="s">&#39;Mtot&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="mi">10</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s">&#39;xCG&#39;</span><span class="p">]):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEquals</span><span class="p">(</span><span class="n">comp</span><span class="o">.</span><span class="n">xCG</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">val</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span>
                <span class="n">msg</span><span class="o">=</span><span class="s">&#39;xCG[</span><span class="si">%d</span><span class="s">] is </span><span class="si">%f</span><span class="s">, should be </span><span class="si">%f</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">comp</span><span class="o">.</span><span class="n">xCG</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">val</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="TestStructures.check_FEM"><a class="viewcode-back" href="../../../srcdocs.html#Atlas.test.test_structures.TestStructures.check_FEM">[docs]</a>    <span class="k">def</span> <span class="nf">check_FEM</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">comp</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; check component FEM results against MATLAB data  &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">h</span><span class="p">,</span> <span class="n">plane</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s">&#39;k&#39;</span><span class="p">]):</span>
            <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">row</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">plane</span><span class="p">):</span>
                <span class="k">for</span> <span class="n">j</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">row</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEquals</span><span class="p">(</span><span class="n">comp</span><span class="o">.</span><span class="n">k</span><span class="p">[</span><span class="n">h</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">],</span> <span class="n">val</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span>
                        <span class="n">msg</span><span class="o">=</span><span class="s">&#39;k[</span><span class="si">%d</span><span class="s">, </span><span class="si">%d</span><span class="s">, </span><span class="si">%d</span><span class="s">] is </span><span class="si">%f</span><span class="s">, should be </span><span class="si">%f</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">h</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">comp</span><span class="o">.</span><span class="n">k</span><span class="p">[</span><span class="n">h</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">],</span> <span class="n">val</span><span class="p">))</span>

        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">row</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s">&#39;K&#39;</span><span class="p">]):</span>
            <span class="k">for</span> <span class="n">j</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">row</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEquals</span><span class="p">(</span><span class="n">comp</span><span class="o">.</span><span class="n">K</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">],</span> <span class="n">val</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span>
                    <span class="n">msg</span><span class="o">=</span><span class="s">&#39;K[</span><span class="si">%d</span><span class="s">, </span><span class="si">%d</span><span class="s">] is </span><span class="si">%f</span><span class="s">, should be </span><span class="si">%f</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">comp</span><span class="o">.</span><span class="n">K</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">],</span> <span class="n">val</span><span class="p">))</span>

        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s">&#39;F&#39;</span><span class="p">]):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEquals</span><span class="p">(</span><span class="n">comp</span><span class="o">.</span><span class="n">F</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">val</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span>
                <span class="n">msg</span><span class="o">=</span><span class="s">&#39;F[</span><span class="si">%d</span><span class="s">] is </span><span class="si">%f</span><span class="s">, should be </span><span class="si">%f</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">comp</span><span class="o">.</span><span class="n">F</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">val</span><span class="p">))</span>

        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s">&#39;q&#39;</span><span class="p">]):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEquals</span><span class="p">(</span><span class="n">comp</span><span class="o">.</span><span class="n">q</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">val</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span>
                <span class="n">msg</span><span class="o">=</span><span class="s">&#39;q[</span><span class="si">%d</span><span class="s">] is </span><span class="si">%f</span><span class="s">, should be </span><span class="si">%f</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">comp</span><span class="o">.</span><span class="n">q</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">val</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="TestStructures.test_FEM"><a class="viewcode-back" href="../../../srcdocs.html#Atlas.test.test_structures.TestStructures.test_FEM">[docs]</a>    <span class="k">def</span> <span class="nf">test_FEM</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; test of FEM calculations &quot;&quot;&quot;</span>
        <span class="n">comp</span> <span class="o">=</span> <span class="n">FEM</span><span class="p">()</span>

        <span class="n">path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">__file__</span><span class="p">),</span> <span class="s">&#39;FEM.mat&#39;</span><span class="p">)</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">loadmat</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">struct_as_record</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">mat_dtype</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

        <span class="c"># populate inputs</span>
        <span class="n">comp</span><span class="o">.</span><span class="n">flags</span> <span class="o">=</span> <span class="n">Flags</span><span class="p">()</span>
        <span class="n">comp</span><span class="o">.</span><span class="n">flags</span><span class="o">.</span><span class="n">Load</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s">&#39;flags&#39;</span><span class="p">][</span><span class="s">&#39;Load&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">comp</span><span class="o">.</span><span class="n">flags</span><span class="o">.</span><span class="n">wingWarp</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s">&#39;flags&#39;</span><span class="p">][</span><span class="s">&#39;wingWarp&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>

        <span class="n">comp</span><span class="o">.</span><span class="n">yN</span>  <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s">&#39;yN&#39;</span><span class="p">]</span>

        <span class="n">comp</span><span class="o">.</span><span class="n">EIx</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s">&#39;EIx&#39;</span><span class="p">]</span>
        <span class="n">comp</span><span class="o">.</span><span class="n">EIz</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s">&#39;EIz&#39;</span><span class="p">]</span>
        <span class="n">comp</span><span class="o">.</span><span class="n">EA</span>  <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s">&#39;EA&#39;</span><span class="p">]</span>
        <span class="n">comp</span><span class="o">.</span><span class="n">GJ</span>  <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s">&#39;GJ&#39;</span><span class="p">]</span>

        <span class="n">comp</span><span class="o">.</span><span class="n">cE</span>  <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s">&#39;cE&#39;</span><span class="p">]</span>
        <span class="n">comp</span><span class="o">.</span><span class="n">xEA</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s">&#39;xEA&#39;</span><span class="p">]</span>

        <span class="n">comp</span><span class="o">.</span><span class="n">fblade</span> <span class="o">=</span> <span class="n">Fblade</span><span class="p">()</span>
        <span class="n">comp</span><span class="o">.</span><span class="n">fblade</span><span class="o">.</span><span class="n">Fx</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s">&#39;Fblade&#39;</span><span class="p">][</span><span class="s">&#39;Fx&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
        <span class="n">comp</span><span class="o">.</span><span class="n">fblade</span><span class="o">.</span><span class="n">Fz</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s">&#39;Fblade&#39;</span><span class="p">][</span><span class="s">&#39;Fz&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
        <span class="n">comp</span><span class="o">.</span><span class="n">fblade</span><span class="o">.</span><span class="n">My</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s">&#39;Fblade&#39;</span><span class="p">][</span><span class="s">&#39;My&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
        <span class="n">comp</span><span class="o">.</span><span class="n">fblade</span><span class="o">.</span><span class="n">Q</span>  <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s">&#39;Fblade&#39;</span><span class="p">][</span><span class="s">&#39;Q&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
        <span class="n">comp</span><span class="o">.</span><span class="n">fblade</span><span class="o">.</span><span class="n">P</span>  <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s">&#39;Fblade&#39;</span><span class="p">][</span><span class="s">&#39;P&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
        <span class="n">comp</span><span class="o">.</span><span class="n">fblade</span><span class="o">.</span><span class="n">Pi</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s">&#39;Fblade&#39;</span><span class="p">][</span><span class="s">&#39;Pi&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
        <span class="n">comp</span><span class="o">.</span><span class="n">fblade</span><span class="o">.</span><span class="n">Pp</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s">&#39;Fblade&#39;</span><span class="p">][</span><span class="s">&#39;Pp&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>

        <span class="n">comp</span><span class="o">.</span><span class="n">mSpar</span>  <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s">&#39;mSpar&#39;</span><span class="p">]</span>
        <span class="n">comp</span><span class="o">.</span><span class="n">mChord</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s">&#39;mChord&#39;</span><span class="p">]</span>
        <span class="n">comp</span><span class="o">.</span><span class="n">xCG</span>    <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s">&#39;xCG&#39;</span><span class="p">]</span>

        <span class="n">comp</span><span class="o">.</span><span class="n">yWire</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s">&#39;yWire&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
        <span class="n">comp</span><span class="o">.</span><span class="n">zWire</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s">&#39;zWire&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">comp</span><span class="o">.</span><span class="n">TWire</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s">&#39;TWire&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>

        <span class="n">comp</span><span class="o">.</span><span class="n">presLoad</span> <span class="o">=</span> <span class="n">PrescribedLoad</span><span class="p">()</span>
        <span class="n">comp</span><span class="o">.</span><span class="n">presLoad</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s">&#39;presLoad&#39;</span><span class="p">][</span><span class="s">&#39;y&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">comp</span><span class="o">.</span><span class="n">presLoad</span><span class="o">.</span><span class="n">pointZ</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s">&#39;presLoad&#39;</span><span class="p">][</span><span class="s">&#39;pointZ&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">comp</span><span class="o">.</span><span class="n">presLoad</span><span class="o">.</span><span class="n">pointM</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s">&#39;presLoad&#39;</span><span class="p">][</span><span class="s">&#39;pointM&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">comp</span><span class="o">.</span><span class="n">presLoad</span><span class="o">.</span><span class="n">distributedX</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s">&#39;presLoad&#39;</span><span class="p">][</span><span class="s">&#39;distributedX&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">comp</span><span class="o">.</span><span class="n">presLoad</span><span class="o">.</span><span class="n">distributedZ</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s">&#39;presLoad&#39;</span><span class="p">][</span><span class="s">&#39;distributedZ&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">comp</span><span class="o">.</span><span class="n">presLoad</span><span class="o">.</span><span class="n">distributedM</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s">&#39;presLoad&#39;</span><span class="p">][</span><span class="s">&#39;distributedM&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>

        <span class="c"># run</span>
        <span class="n">comp</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>

        <span class="c"># check outputs</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check_FEM</span><span class="p">(</span><span class="n">comp</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestStructures.check_strains"><a class="viewcode-back" href="../../../srcdocs.html#Atlas.test.test_structures.TestStructures.check_strains">[docs]</a>    <span class="k">def</span> <span class="nf">check_strains</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">comp</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; check component internal force and strain results against MATLAB data  &quot;&quot;&quot;</span>

        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">row</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s">&#39;Finternal&#39;</span><span class="p">]):</span>
            <span class="k">for</span> <span class="n">j</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">row</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEquals</span><span class="p">(</span><span class="n">comp</span><span class="o">.</span><span class="n">Finternal</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">],</span> <span class="n">val</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span>
                    <span class="n">msg</span><span class="o">=</span><span class="s">&#39;Finternal[</span><span class="si">%d</span><span class="s">, </span><span class="si">%d</span><span class="s">] is </span><span class="si">%f</span><span class="s">, should be </span><span class="si">%f</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">comp</span><span class="o">.</span><span class="n">Finternal</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">],</span> <span class="n">val</span><span class="p">))</span>

        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">row</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s">&#39;strain&#39;</span><span class="p">][</span><span class="s">&#39;top&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]):</span>
            <span class="k">for</span> <span class="n">j</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEquals</span><span class="p">(</span><span class="n">comp</span><span class="o">.</span><span class="n">strain</span><span class="o">.</span><span class="n">top</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">],</span> <span class="n">val</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span>
                    <span class="n">msg</span><span class="o">=</span><span class="s">&#39;strain.top[</span><span class="si">%d</span><span class="s">, </span><span class="si">%d</span><span class="s">] is </span><span class="si">%f</span><span class="s">, should be </span><span class="si">%f</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">comp</span><span class="o">.</span><span class="n">strain</span><span class="o">.</span><span class="n">top</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">],</span> <span class="n">val</span><span class="p">))</span>

        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">row</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s">&#39;strain&#39;</span><span class="p">][</span><span class="s">&#39;bottom&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]):</span>
            <span class="k">for</span> <span class="n">j</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEquals</span><span class="p">(</span><span class="n">comp</span><span class="o">.</span><span class="n">strain</span><span class="o">.</span><span class="n">bottom</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">],</span> <span class="n">val</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span>
                    <span class="n">msg</span><span class="o">=</span><span class="s">&#39;strain.bottom[</span><span class="si">%d</span><span class="s">, </span><span class="si">%d</span><span class="s">] is </span><span class="si">%f</span><span class="s">, should be </span><span class="si">%f</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">comp</span><span class="o">.</span><span class="n">strain</span><span class="o">.</span><span class="n">bottom</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">],</span> <span class="n">val</span><span class="p">))</span>

        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">row</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s">&#39;strain&#39;</span><span class="p">][</span><span class="s">&#39;back&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]):</span>
            <span class="k">for</span> <span class="n">j</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEquals</span><span class="p">(</span><span class="n">comp</span><span class="o">.</span><span class="n">strain</span><span class="o">.</span><span class="n">back</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">],</span> <span class="n">val</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span>
                    <span class="n">msg</span><span class="o">=</span><span class="s">&#39;strain.back[</span><span class="si">%d</span><span class="s">, </span><span class="si">%d</span><span class="s">] is </span><span class="si">%f</span><span class="s">, should be </span><span class="si">%f</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">comp</span><span class="o">.</span><span class="n">strain</span><span class="o">.</span><span class="n">back</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">],</span> <span class="n">val</span><span class="p">))</span>

        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">row</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s">&#39;strain&#39;</span><span class="p">][</span><span class="s">&#39;front&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]):</span>
            <span class="k">for</span> <span class="n">j</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEquals</span><span class="p">(</span><span class="n">comp</span><span class="o">.</span><span class="n">strain</span><span class="o">.</span><span class="n">front</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">],</span> <span class="n">val</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span>
                    <span class="n">msg</span><span class="o">=</span><span class="s">&#39;strain.bottom[</span><span class="si">%d</span><span class="s">, </span><span class="si">%d</span><span class="s">] is </span><span class="si">%f</span><span class="s">, should be </span><span class="si">%f</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">comp</span><span class="o">.</span><span class="n">strain</span><span class="o">.</span><span class="n">front</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">],</span> <span class="n">val</span><span class="p">))</span>

        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">row</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s">&#39;strain&#39;</span><span class="p">][</span><span class="s">&#39;bending_x&#39;</span><span class="p">]):</span>
            <span class="k">for</span> <span class="n">j</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEquals</span><span class="p">(</span><span class="n">comp</span><span class="o">.</span><span class="n">strain</span><span class="o">.</span><span class="n">bending_x</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">],</span> <span class="n">val</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span>
                    <span class="n">msg</span><span class="o">=</span><span class="s">&#39;strain.bending_x[</span><span class="si">%d</span><span class="s">, </span><span class="si">%d</span><span class="s">] is </span><span class="si">%f</span><span class="s">, should be </span><span class="si">%f</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">comp</span><span class="o">.</span><span class="n">strain</span><span class="o">.</span><span class="n">bending_x</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">],</span> <span class="n">val</span><span class="p">))</span>

        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">row</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s">&#39;strain&#39;</span><span class="p">][</span><span class="s">&#39;bending_z&#39;</span><span class="p">]):</span>
            <span class="k">for</span> <span class="n">j</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEquals</span><span class="p">(</span><span class="n">comp</span><span class="o">.</span><span class="n">strain</span><span class="o">.</span><span class="n">bending_z</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">],</span> <span class="n">val</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span>
                    <span class="n">msg</span><span class="o">=</span><span class="s">&#39;strain.bending_z[</span><span class="si">%d</span><span class="s">, </span><span class="si">%d</span><span class="s">] is </span><span class="si">%f</span><span class="s">, should be </span><span class="si">%f</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">comp</span><span class="o">.</span><span class="n">strain</span><span class="o">.</span><span class="n">bending_z</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">],</span> <span class="n">val</span><span class="p">))</span>

        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">row</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s">&#39;strain&#39;</span><span class="p">][</span><span class="s">&#39;axial_y&#39;</span><span class="p">]):</span>
            <span class="k">for</span> <span class="n">j</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEquals</span><span class="p">(</span><span class="n">comp</span><span class="o">.</span><span class="n">strain</span><span class="o">.</span><span class="n">axial_y</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">],</span> <span class="n">val</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span>
                    <span class="n">msg</span><span class="o">=</span><span class="s">&#39;strain.axial_y[</span><span class="si">%d</span><span class="s">, </span><span class="si">%d</span><span class="s">] is </span><span class="si">%f</span><span class="s">, should be </span><span class="si">%f</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">comp</span><span class="o">.</span><span class="n">strain</span><span class="o">.</span><span class="n">axial_y</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">],</span> <span class="n">val</span><span class="p">))</span>

        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">row</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s">&#39;strain&#39;</span><span class="p">][</span><span class="s">&#39;torsion_y&#39;</span><span class="p">]):</span>
            <span class="k">for</span> <span class="n">j</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEquals</span><span class="p">(</span><span class="n">comp</span><span class="o">.</span><span class="n">strain</span><span class="o">.</span><span class="n">torsion_y</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">],</span> <span class="n">val</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span>
                    <span class="n">msg</span><span class="o">=</span><span class="s">&#39;strain.torsion_y[</span><span class="si">%d</span><span class="s">, </span><span class="si">%d</span><span class="s">] is </span><span class="si">%f</span><span class="s">, should be </span><span class="si">%f</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">comp</span><span class="o">.</span><span class="n">strain</span><span class="o">.</span><span class="n">torsion_y</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">],</span> <span class="n">val</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="TestStructures.test_Strains"><a class="viewcode-back" href="../../../srcdocs.html#Atlas.test.test_structures.TestStructures.test_Strains">[docs]</a>    <span class="k">def</span> <span class="nf">test_Strains</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; test of internal force and strain calculations  &quot;&quot;&quot;</span>
        <span class="n">comp</span> <span class="o">=</span> <span class="n">Strains</span><span class="p">()</span>

        <span class="c"># populate inputs from MATLAB test data</span>
        <span class="n">path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">__file__</span><span class="p">),</span> <span class="s">&#39;strains.mat&#39;</span><span class="p">)</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">loadmat</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">struct_as_record</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
        <span class="n">comp</span><span class="o">.</span><span class="n">yN</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s">&#39;yN&#39;</span><span class="p">]</span>
        <span class="n">comp</span><span class="o">.</span><span class="n">d</span>  <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s">&#39;d&#39;</span><span class="p">]</span>
        <span class="n">comp</span><span class="o">.</span><span class="n">k</span>  <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s">&#39;k&#39;</span><span class="p">]</span>
        <span class="n">comp</span><span class="o">.</span><span class="n">F</span>  <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s">&#39;F&#39;</span><span class="p">]</span>
        <span class="n">comp</span><span class="o">.</span><span class="n">q</span>  <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s">&#39;q&#39;</span><span class="p">]</span>

        <span class="c"># run</span>
        <span class="n">comp</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>

        <span class="c"># check outputs</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check_strains</span><span class="p">(</span><span class="n">comp</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestStructures.check_failures"><a class="viewcode-back" href="../../../srcdocs.html#Atlas.test.test_structures.TestStructures.check_failures">[docs]</a>    <span class="k">def</span> <span class="nf">check_failures</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">comp</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; check component failure results against MATLAB data  &quot;&quot;&quot;</span>

        <span class="c"># top</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">row</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s">&#39;fail&#39;</span><span class="p">][</span><span class="s">&#39;top&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">][</span><span class="s">&#39;cap&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]):</span>
            <span class="k">for</span> <span class="n">j</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">row</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEquals</span><span class="p">(</span><span class="n">comp</span><span class="o">.</span><span class="n">fail</span><span class="o">.</span><span class="n">top</span><span class="o">.</span><span class="n">cap</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">],</span> <span class="n">val</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span>
                    <span class="n">msg</span><span class="o">=</span><span class="s">&#39;fail.top.cap[</span><span class="si">%d</span><span class="s">, </span><span class="si">%d</span><span class="s">] is </span><span class="si">%f</span><span class="s">, should be </span><span class="si">%f</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">comp</span><span class="o">.</span><span class="n">fail</span><span class="o">.</span><span class="n">top</span><span class="o">.</span><span class="n">cap</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">],</span> <span class="n">val</span><span class="p">))</span>

        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">row</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s">&#39;fail&#39;</span><span class="p">][</span><span class="s">&#39;top&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">][</span><span class="s">&#39;plus&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]):</span>
            <span class="k">for</span> <span class="n">j</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">row</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEquals</span><span class="p">(</span><span class="n">comp</span><span class="o">.</span><span class="n">fail</span><span class="o">.</span><span class="n">top</span><span class="o">.</span><span class="n">plus</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">],</span> <span class="n">val</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span>
                    <span class="n">msg</span><span class="o">=</span><span class="s">&#39;fail.top.plus[</span><span class="si">%d</span><span class="s">, </span><span class="si">%d</span><span class="s">] is </span><span class="si">%f</span><span class="s">, should be </span><span class="si">%f</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">comp</span><span class="o">.</span><span class="n">fail</span><span class="o">.</span><span class="n">top</span><span class="o">.</span><span class="n">plus</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">],</span> <span class="n">val</span><span class="p">))</span>

        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">row</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s">&#39;fail&#39;</span><span class="p">][</span><span class="s">&#39;top&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">][</span><span class="s">&#39;minus&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]):</span>
            <span class="k">for</span> <span class="n">j</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">row</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEquals</span><span class="p">(</span><span class="n">comp</span><span class="o">.</span><span class="n">fail</span><span class="o">.</span><span class="n">top</span><span class="o">.</span><span class="n">minus</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">],</span> <span class="n">val</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span>
                    <span class="n">msg</span><span class="o">=</span><span class="s">&#39;fail.top.minus[</span><span class="si">%d</span><span class="s">, </span><span class="si">%d</span><span class="s">] is </span><span class="si">%f</span><span class="s">, should be </span><span class="si">%f</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">comp</span><span class="o">.</span><span class="n">fail</span><span class="o">.</span><span class="n">top</span><span class="o">.</span><span class="n">minus</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">],</span> <span class="n">val</span><span class="p">))</span>

        <span class="c"># bottom</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">row</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s">&#39;fail&#39;</span><span class="p">][</span><span class="s">&#39;bottom&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">][</span><span class="s">&#39;cap&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]):</span>
            <span class="k">for</span> <span class="n">j</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">row</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEquals</span><span class="p">(</span><span class="n">comp</span><span class="o">.</span><span class="n">fail</span><span class="o">.</span><span class="n">bottom</span><span class="o">.</span><span class="n">cap</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">],</span> <span class="n">val</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span>
                    <span class="n">msg</span><span class="o">=</span><span class="s">&#39;fail.bottom.cap[</span><span class="si">%d</span><span class="s">, </span><span class="si">%d</span><span class="s">] is </span><span class="si">%f</span><span class="s">, should be </span><span class="si">%f</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">comp</span><span class="o">.</span><span class="n">fail</span><span class="o">.</span><span class="n">bottom</span><span class="o">.</span><span class="n">cap</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">],</span> <span class="n">val</span><span class="p">))</span>

        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">row</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s">&#39;fail&#39;</span><span class="p">][</span><span class="s">&#39;bottom&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">][</span><span class="s">&#39;plus&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]):</span>
            <span class="k">for</span> <span class="n">j</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">row</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEquals</span><span class="p">(</span><span class="n">comp</span><span class="o">.</span><span class="n">fail</span><span class="o">.</span><span class="n">bottom</span><span class="o">.</span><span class="n">plus</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">],</span> <span class="n">val</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span>
                    <span class="n">msg</span><span class="o">=</span><span class="s">&#39;fail.bottom.plus[</span><span class="si">%d</span><span class="s">, </span><span class="si">%d</span><span class="s">] is </span><span class="si">%f</span><span class="s">, should be </span><span class="si">%f</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">comp</span><span class="o">.</span><span class="n">fail</span><span class="o">.</span><span class="n">bottom</span><span class="o">.</span><span class="n">plus</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">],</span> <span class="n">val</span><span class="p">))</span>

        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">row</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s">&#39;fail&#39;</span><span class="p">][</span><span class="s">&#39;bottom&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">][</span><span class="s">&#39;minus&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]):</span>
            <span class="k">for</span> <span class="n">j</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">row</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEquals</span><span class="p">(</span><span class="n">comp</span><span class="o">.</span><span class="n">fail</span><span class="o">.</span><span class="n">bottom</span><span class="o">.</span><span class="n">minus</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">],</span> <span class="n">val</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span>
                    <span class="n">msg</span><span class="o">=</span><span class="s">&#39;fail.bottom.minus[</span><span class="si">%d</span><span class="s">, </span><span class="si">%d</span><span class="s">] is </span><span class="si">%f</span><span class="s">, should be </span><span class="si">%f</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">comp</span><span class="o">.</span><span class="n">fail</span><span class="o">.</span><span class="n">bottom</span><span class="o">.</span><span class="n">minus</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">],</span> <span class="n">val</span><span class="p">))</span>

        <span class="c"># back</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">row</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s">&#39;fail&#39;</span><span class="p">][</span><span class="s">&#39;back&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">][</span><span class="s">&#39;cap&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]):</span>
            <span class="k">for</span> <span class="n">j</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">row</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEquals</span><span class="p">(</span><span class="n">comp</span><span class="o">.</span><span class="n">fail</span><span class="o">.</span><span class="n">back</span><span class="o">.</span><span class="n">cap</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">],</span> <span class="n">val</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span>
                    <span class="n">msg</span><span class="o">=</span><span class="s">&#39;fail.back.cap[</span><span class="si">%d</span><span class="s">, </span><span class="si">%d</span><span class="s">] is </span><span class="si">%f</span><span class="s">, should be </span><span class="si">%f</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">comp</span><span class="o">.</span><span class="n">fail</span><span class="o">.</span><span class="n">back</span><span class="o">.</span><span class="n">cap</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">],</span> <span class="n">val</span><span class="p">))</span>

        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">row</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s">&#39;fail&#39;</span><span class="p">][</span><span class="s">&#39;back&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">][</span><span class="s">&#39;plus&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]):</span>
            <span class="k">for</span> <span class="n">j</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">row</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEquals</span><span class="p">(</span><span class="n">comp</span><span class="o">.</span><span class="n">fail</span><span class="o">.</span><span class="n">back</span><span class="o">.</span><span class="n">plus</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">],</span> <span class="n">val</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span>
                    <span class="n">msg</span><span class="o">=</span><span class="s">&#39;fail.back.plus[</span><span class="si">%d</span><span class="s">, </span><span class="si">%d</span><span class="s">] is </span><span class="si">%f</span><span class="s">, should be </span><span class="si">%f</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">comp</span><span class="o">.</span><span class="n">fail</span><span class="o">.</span><span class="n">back</span><span class="o">.</span><span class="n">plus</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">],</span> <span class="n">val</span><span class="p">))</span>

        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">row</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s">&#39;fail&#39;</span><span class="p">][</span><span class="s">&#39;back&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">][</span><span class="s">&#39;minus&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]):</span>
            <span class="k">for</span> <span class="n">j</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">row</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEquals</span><span class="p">(</span><span class="n">comp</span><span class="o">.</span><span class="n">fail</span><span class="o">.</span><span class="n">back</span><span class="o">.</span><span class="n">minus</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">],</span> <span class="n">val</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span>
                    <span class="n">msg</span><span class="o">=</span><span class="s">&#39;fail.back.minus[</span><span class="si">%d</span><span class="s">, </span><span class="si">%d</span><span class="s">] is </span><span class="si">%f</span><span class="s">, should be </span><span class="si">%f</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">comp</span><span class="o">.</span><span class="n">fail</span><span class="o">.</span><span class="n">back</span><span class="o">.</span><span class="n">minus</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">],</span> <span class="n">val</span><span class="p">))</span>

        <span class="c"># front</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">row</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s">&#39;fail&#39;</span><span class="p">][</span><span class="s">&#39;front&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">][</span><span class="s">&#39;cap&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]):</span>
            <span class="k">for</span> <span class="n">j</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">row</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEquals</span><span class="p">(</span><span class="n">comp</span><span class="o">.</span><span class="n">fail</span><span class="o">.</span><span class="n">front</span><span class="o">.</span><span class="n">cap</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">],</span> <span class="n">val</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span>
                    <span class="n">msg</span><span class="o">=</span><span class="s">&#39;fail.front.cap[</span><span class="si">%d</span><span class="s">, </span><span class="si">%d</span><span class="s">] is </span><span class="si">%f</span><span class="s">, should be </span><span class="si">%f</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">comp</span><span class="o">.</span><span class="n">fail</span><span class="o">.</span><span class="n">front</span><span class="o">.</span><span class="n">cap</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">],</span> <span class="n">val</span><span class="p">))</span>

        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">row</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s">&#39;fail&#39;</span><span class="p">][</span><span class="s">&#39;front&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">][</span><span class="s">&#39;plus&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]):</span>
            <span class="k">for</span> <span class="n">j</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">row</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEquals</span><span class="p">(</span><span class="n">comp</span><span class="o">.</span><span class="n">fail</span><span class="o">.</span><span class="n">front</span><span class="o">.</span><span class="n">plus</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">],</span> <span class="n">val</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span>
                    <span class="n">msg</span><span class="o">=</span><span class="s">&#39;fail.front.plus[</span><span class="si">%d</span><span class="s">, </span><span class="si">%d</span><span class="s">] is </span><span class="si">%f</span><span class="s">, should be </span><span class="si">%f</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">comp</span><span class="o">.</span><span class="n">fail</span><span class="o">.</span><span class="n">front</span><span class="o">.</span><span class="n">plus</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">],</span> <span class="n">val</span><span class="p">))</span>

        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">row</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s">&#39;fail&#39;</span><span class="p">][</span><span class="s">&#39;front&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">][</span><span class="s">&#39;minus&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]):</span>
            <span class="k">for</span> <span class="n">j</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">row</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEquals</span><span class="p">(</span><span class="n">comp</span><span class="o">.</span><span class="n">fail</span><span class="o">.</span><span class="n">front</span><span class="o">.</span><span class="n">minus</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">],</span> <span class="n">val</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span>
                    <span class="n">msg</span><span class="o">=</span><span class="s">&#39;fail.front.minus[</span><span class="si">%d</span><span class="s">, </span><span class="si">%d</span><span class="s">] is </span><span class="si">%f</span><span class="s">, should be </span><span class="si">%f</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">comp</span><span class="o">.</span><span class="n">fail</span><span class="o">.</span><span class="n">front</span><span class="o">.</span><span class="n">minus</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">],</span> <span class="n">val</span><span class="p">))</span>

        <span class="c"># buckling</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s">&#39;fail&#39;</span><span class="p">][</span><span class="s">&#39;buckling&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">][</span><span class="s">&#39;x&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEquals</span><span class="p">(</span><span class="n">comp</span><span class="o">.</span><span class="n">fail</span><span class="o">.</span><span class="n">buckling</span><span class="o">.</span><span class="n">x</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">val</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span>
                <span class="n">msg</span><span class="o">=</span><span class="s">&#39;fail.buckling.x[</span><span class="si">%d</span><span class="s">] is </span><span class="si">%f</span><span class="s">, should be </span><span class="si">%f</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">comp</span><span class="o">.</span><span class="n">fail</span><span class="o">.</span><span class="n">buckling</span><span class="o">.</span><span class="n">x</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">val</span><span class="p">))</span>

        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s">&#39;fail&#39;</span><span class="p">][</span><span class="s">&#39;buckling&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">][</span><span class="s">&#39;z&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEquals</span><span class="p">(</span><span class="n">comp</span><span class="o">.</span><span class="n">fail</span><span class="o">.</span><span class="n">buckling</span><span class="o">.</span><span class="n">z</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">val</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span>
                <span class="n">msg</span><span class="o">=</span><span class="s">&#39;fail.buckling.z[</span><span class="si">%d</span><span class="s">] is </span><span class="si">%f</span><span class="s">, should be </span><span class="si">%f</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">comp</span><span class="o">.</span><span class="n">fail</span><span class="o">.</span><span class="n">buckling</span><span class="o">.</span><span class="n">z</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">val</span><span class="p">))</span>

        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s">&#39;fail&#39;</span><span class="p">][</span><span class="s">&#39;buckling&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">][</span><span class="s">&#39;torsion&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEquals</span><span class="p">(</span><span class="n">comp</span><span class="o">.</span><span class="n">fail</span><span class="o">.</span><span class="n">buckling</span><span class="o">.</span><span class="n">torsion</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">val</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span>
                <span class="n">msg</span><span class="o">=</span><span class="s">&#39;fail.buckling.torsion[</span><span class="si">%d</span><span class="s">] is </span><span class="si">%f</span><span class="s">, should be </span><span class="si">%f</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">comp</span><span class="o">.</span><span class="n">fail</span><span class="o">.</span><span class="n">buckling</span><span class="o">.</span><span class="n">torsion</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">val</span><span class="p">))</span>

        <span class="c"># quad</span>
        <span class="n">val</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s">&#39;fail&#39;</span><span class="p">][</span><span class="s">&#39;quad&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">][</span><span class="s">&#39;buckling&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEquals</span><span class="p">(</span><span class="n">comp</span><span class="o">.</span><span class="n">fail</span><span class="o">.</span><span class="n">quad_buckling</span><span class="p">,</span> <span class="n">val</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span>
            <span class="n">msg</span><span class="o">=</span><span class="s">&#39;fail.quad_buckling is </span><span class="si">%f</span><span class="s">, should be </span><span class="si">%f</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">comp</span><span class="o">.</span><span class="n">fail</span><span class="o">.</span><span class="n">quad_buckling</span><span class="p">,</span> <span class="n">val</span><span class="p">))</span>

        <span class="n">val</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s">&#39;fail&#39;</span><span class="p">][</span><span class="s">&#39;quad&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">][</span><span class="s">&#39;bend&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEquals</span><span class="p">(</span><span class="n">comp</span><span class="o">.</span><span class="n">fail</span><span class="o">.</span><span class="n">quad_bend</span><span class="p">,</span> <span class="n">val</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span>
            <span class="n">msg</span><span class="o">=</span><span class="s">&#39;fail.quad_bend is </span><span class="si">%f</span><span class="s">, should be </span><span class="si">%f</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">comp</span><span class="o">.</span><span class="n">fail</span><span class="o">.</span><span class="n">quad_bend</span><span class="p">,</span> <span class="n">val</span><span class="p">))</span>

        <span class="n">val</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s">&#39;fail&#39;</span><span class="p">][</span><span class="s">&#39;quad&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">][</span><span class="s">&#39;torsion&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEquals</span><span class="p">(</span><span class="n">comp</span><span class="o">.</span><span class="n">fail</span><span class="o">.</span><span class="n">quad_torsion</span><span class="p">,</span> <span class="n">val</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span>
            <span class="n">msg</span><span class="o">=</span><span class="s">&#39;fail.quad_torsion is </span><span class="si">%f</span><span class="s">, should be </span><span class="si">%f</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">comp</span><span class="o">.</span><span class="n">fail</span><span class="o">.</span><span class="n">quad_torsion</span><span class="p">,</span> <span class="n">val</span><span class="p">))</span>

        <span class="n">val</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s">&#39;fail&#39;</span><span class="p">][</span><span class="s">&#39;quad&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">][</span><span class="s">&#39;torbuck&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEquals</span><span class="p">(</span><span class="n">comp</span><span class="o">.</span><span class="n">fail</span><span class="o">.</span><span class="n">quad_torbuck</span><span class="p">,</span> <span class="n">val</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span>
            <span class="n">msg</span><span class="o">=</span><span class="s">&#39;fail.quad_torbuck is </span><span class="si">%f</span><span class="s">, should be </span><span class="si">%f</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">comp</span><span class="o">.</span><span class="n">fail</span><span class="o">.</span><span class="n">quad_torbuck</span><span class="p">,</span> <span class="n">val</span><span class="p">))</span>

        <span class="c"># wire</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s">&#39;fail&#39;</span><span class="p">][</span><span class="s">&#39;wire&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEquals</span><span class="p">(</span><span class="n">comp</span><span class="o">.</span><span class="n">fail</span><span class="o">.</span><span class="n">wire</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">val</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span>
                <span class="n">msg</span><span class="o">=</span><span class="s">&#39;fail.wire[</span><span class="si">%d</span><span class="s">] is </span><span class="si">%f</span><span class="s">, should be </span><span class="si">%f</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">comp</span><span class="o">.</span><span class="n">fail</span><span class="o">.</span><span class="n">wire</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">val</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="TestStructures.test_Failures"><a class="viewcode-back" href="../../../srcdocs.html#Atlas.test.test_structures.TestStructures.test_Failures">[docs]</a>    <span class="k">def</span> <span class="nf">test_Failures</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; test of failure calculations  &quot;&quot;&quot;</span>
        <span class="n">comp</span> <span class="o">=</span> <span class="n">Failures</span><span class="p">()</span>

        <span class="n">path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">__file__</span><span class="p">),</span> <span class="s">&#39;failure.mat&#39;</span><span class="p">)</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">loadmat</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">struct_as_record</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">mat_dtype</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

        <span class="c"># populate inputs</span>
        <span class="n">comp</span><span class="o">.</span><span class="n">flags</span> <span class="o">=</span> <span class="n">Flags</span><span class="p">()</span>
        <span class="n">CFRPType</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s">&#39;flags&#39;</span><span class="p">][</span><span class="s">&#39;CFRPType&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
        <span class="k">if</span> <span class="n">CFRPType</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">comp</span><span class="o">.</span><span class="n">flags</span><span class="o">.</span><span class="n">CFRPType</span> <span class="o">=</span> <span class="s">&#39;NCT301-1X HS40 G150 33 +/-2%RW&#39;</span>
        <span class="k">elif</span> <span class="n">CFRPType</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="n">comp</span><span class="o">.</span><span class="n">flags</span><span class="o">.</span><span class="n">CFRPType</span> <span class="o">=</span> <span class="s">&#39;HexPly 6376 HTS-12K 268gsm 35%RW&#39;</span>
        <span class="k">elif</span> <span class="n">CFRPType</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
            <span class="n">comp</span><span class="o">.</span><span class="n">flags</span><span class="o">.</span><span class="n">CFRPType</span> <span class="o">=</span> <span class="s">&#39;MTM28-1/IM7-GP-145gsm 32 +/-2%Rw&#39;</span>
        <span class="k">elif</span> <span class="n">CFRPType</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
            <span class="n">comp</span><span class="o">.</span><span class="n">flags</span><span class="o">.</span><span class="n">CFRPType</span> <span class="o">=</span> <span class="s">&#39;HexPly 8552 IM7 160gsm 35%RW&#39;</span>
        <span class="k">elif</span> <span class="n">CFRPType</span> <span class="o">==</span> <span class="mi">5</span><span class="p">:</span>
            <span class="n">comp</span><span class="o">.</span><span class="n">flags</span><span class="o">.</span><span class="n">CFRPType</span> <span class="o">=</span> <span class="s">&#39;NCT304-1 HR40 G80 40 +/-2%RW&#39;</span>
        <span class="k">elif</span> <span class="n">CFRPType</span> <span class="o">==</span> <span class="mi">6</span><span class="p">:</span>
            <span class="n">comp</span><span class="o">.</span><span class="n">flags</span><span class="o">.</span><span class="n">CFRPType</span> <span class="o">=</span> <span class="s">&#39;MTM28-1B/M46J-140-37%RW&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s">&#39;Unable to decode CFRPType from MATLAB data&#39;</span><span class="p">)</span>
        <span class="n">WireType</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s">&#39;flags&#39;</span><span class="p">][</span><span class="s">&#39;WireType&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
        <span class="k">if</span> <span class="n">WireType</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">comp</span><span class="o">.</span><span class="n">flags</span><span class="o">.</span><span class="n">WireType</span> <span class="o">=</span> <span class="s">&#39;Pianowire&#39;</span>
        <span class="k">elif</span> <span class="n">WireType</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="n">comp</span><span class="o">.</span><span class="n">flags</span><span class="o">.</span><span class="n">WireType</span> <span class="o">=</span> <span class="s">&#39;Vectran&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s">&#39;Unable to decode WireType from MATLAB data&#39;</span><span class="p">)</span>

        <span class="n">comp</span><span class="o">.</span><span class="n">yN</span>       <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s">&#39;yN&#39;</span><span class="p">]</span>

        <span class="n">comp</span><span class="o">.</span><span class="n">Finternal</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s">&#39;Finternal&#39;</span><span class="p">]</span>

        <span class="n">comp</span><span class="o">.</span><span class="n">strain</span> <span class="o">=</span> <span class="n">Strain</span><span class="p">()</span>
        <span class="n">comp</span><span class="o">.</span><span class="n">strain</span><span class="o">.</span><span class="n">top</span>       <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s">&#39;strain&#39;</span><span class="p">][</span><span class="s">&#39;top&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">comp</span><span class="o">.</span><span class="n">strain</span><span class="o">.</span><span class="n">bottom</span>    <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s">&#39;strain&#39;</span><span class="p">][</span><span class="s">&#39;bottom&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">comp</span><span class="o">.</span><span class="n">strain</span><span class="o">.</span><span class="n">back</span>      <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s">&#39;strain&#39;</span><span class="p">][</span><span class="s">&#39;back&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">comp</span><span class="o">.</span><span class="n">strain</span><span class="o">.</span><span class="n">front</span>     <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s">&#39;strain&#39;</span><span class="p">][</span><span class="s">&#39;front&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">comp</span><span class="o">.</span><span class="n">strain</span><span class="o">.</span><span class="n">bending_x</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s">&#39;strain&#39;</span><span class="p">][</span><span class="s">&#39;bending_x&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">comp</span><span class="o">.</span><span class="n">strain</span><span class="o">.</span><span class="n">bending_z</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s">&#39;strain&#39;</span><span class="p">][</span><span class="s">&#39;bending_z&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">comp</span><span class="o">.</span><span class="n">strain</span><span class="o">.</span><span class="n">axial_y</span>   <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s">&#39;strain&#39;</span><span class="p">][</span><span class="s">&#39;axial_y&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">comp</span><span class="o">.</span><span class="n">strain</span><span class="o">.</span><span class="n">torsion_y</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s">&#39;strain&#39;</span><span class="p">][</span><span class="s">&#39;torsion_y&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>

        <span class="n">comp</span><span class="o">.</span><span class="n">d</span>        <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s">&#39;d&#39;</span><span class="p">]</span>
        <span class="n">comp</span><span class="o">.</span><span class="n">theta</span>    <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s">&#39;theta&#39;</span><span class="p">]</span>
        <span class="n">comp</span><span class="o">.</span><span class="n">nTube</span>    <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s">&#39;nTube&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
        <span class="n">comp</span><span class="o">.</span><span class="n">nCap</span>     <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s">&#39;nCap&#39;</span><span class="p">]</span>

        <span class="n">comp</span><span class="o">.</span><span class="n">yWire</span>    <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s">&#39;yWire&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">comp</span><span class="o">.</span><span class="n">zWire</span>    <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s">&#39;zWire&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">comp</span><span class="o">.</span><span class="n">EIxJ</span>     <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s">&#39;EIxJ&#39;</span><span class="p">]</span>
        <span class="n">comp</span><span class="o">.</span><span class="n">EIzJ</span>     <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s">&#39;EIzJ&#39;</span><span class="p">]</span>

        <span class="n">comp</span><span class="o">.</span><span class="n">lBiscuit</span>     <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s">&#39;lBiscuit&#39;</span><span class="p">]</span>
        <span class="n">comp</span><span class="o">.</span><span class="n">dQuad</span>        <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s">&#39;dQuad&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">comp</span><span class="o">.</span><span class="n">thetaQuad</span>    <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s">&#39;thetaQuad&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">comp</span><span class="o">.</span><span class="n">nTubeQuad</span>    <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s">&#39;nTubeQuad&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">comp</span><span class="o">.</span><span class="n">lBiscuitQuad</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s">&#39;lBiscuitQuad&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">comp</span><span class="o">.</span><span class="n">RQuad</span>        <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s">&#39;RQuad&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">comp</span><span class="o">.</span><span class="n">hQuad</span>        <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s">&#39;hQuad&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">comp</span><span class="o">.</span><span class="n">EIQuad</span>       <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s">&#39;EIQuad&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
        <span class="n">comp</span><span class="o">.</span><span class="n">GJQuad</span>       <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s">&#39;GJQuad&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
        <span class="n">comp</span><span class="o">.</span><span class="n">tWire</span>        <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s">&#39;tWire&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">comp</span><span class="o">.</span><span class="n">TWire</span>        <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s">&#39;TWire&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
        <span class="n">comp</span><span class="o">.</span><span class="n">TEtension</span>    <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s">&#39;TEtension&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>

        <span class="n">comp</span><span class="o">.</span><span class="n">b</span>          <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">comp</span><span class="o">.</span><span class="n">fblade</span>     <span class="o">=</span> <span class="n">Fblade</span><span class="p">()</span>
        <span class="n">comp</span><span class="o">.</span><span class="n">fblade</span><span class="o">.</span><span class="n">Fx</span>  <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s">&#39;Fblade&#39;</span><span class="p">][</span><span class="s">&#39;Fx&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
        <span class="n">comp</span><span class="o">.</span><span class="n">fblade</span><span class="o">.</span><span class="n">Fz</span>  <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s">&#39;Fblade&#39;</span><span class="p">][</span><span class="s">&#39;Fz&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
        <span class="n">comp</span><span class="o">.</span><span class="n">fblade</span><span class="o">.</span><span class="n">My</span>  <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s">&#39;Fblade&#39;</span><span class="p">][</span><span class="s">&#39;My&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
        <span class="n">comp</span><span class="o">.</span><span class="n">fblade</span><span class="o">.</span><span class="n">Q</span>   <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s">&#39;Fblade&#39;</span><span class="p">][</span><span class="s">&#39;Q&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
        <span class="n">comp</span><span class="o">.</span><span class="n">fblade</span><span class="o">.</span><span class="n">P</span>   <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s">&#39;Fblade&#39;</span><span class="p">][</span><span class="s">&#39;P&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
        <span class="n">comp</span><span class="o">.</span><span class="n">fblade</span><span class="o">.</span><span class="n">Pi</span>  <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s">&#39;Fblade&#39;</span><span class="p">][</span><span class="s">&#39;Pi&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
        <span class="n">comp</span><span class="o">.</span><span class="n">fblade</span><span class="o">.</span><span class="n">Pp</span>  <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s">&#39;Fblade&#39;</span><span class="p">][</span><span class="s">&#39;Pp&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
        <span class="n">comp</span><span class="o">.</span><span class="n">mSpar</span>      <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s">&#39;mSpar&#39;</span><span class="p">]</span>
        <span class="n">comp</span><span class="o">.</span><span class="n">mChord</span>     <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s">&#39;mChord&#39;</span><span class="p">]</span>
        <span class="n">comp</span><span class="o">.</span><span class="n">mElseRotor</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s">&#39;mElseRotor&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>

        <span class="c"># run</span>
        <span class="n">comp</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>

        <span class="c"># check outputs</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check_failures</span><span class="p">(</span><span class="n">comp</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestStructures.test_Structures"><a class="viewcode-back" href="../../../srcdocs.html#Atlas.test.test_structures.TestStructures.test_Structures">[docs]</a>    <span class="k">def</span> <span class="nf">test_Structures</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; full up test of integrated structures calculations &quot;&quot;&quot;</span>
        <span class="n">comp</span> <span class="o">=</span> <span class="n">Structures</span><span class="p">()</span>

        <span class="n">path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">__file__</span><span class="p">),</span> <span class="s">&#39;StrCalc.mat&#39;</span><span class="p">)</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">loadmat</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">struct_as_record</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">mat_dtype</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

        <span class="c"># populate inputs</span>
        <span class="n">comp</span><span class="o">.</span><span class="n">flags</span> <span class="o">=</span> <span class="n">Flags</span><span class="p">()</span>
        <span class="n">comp</span><span class="o">.</span><span class="n">flags</span><span class="o">.</span><span class="n">Cover</span>    <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s">&#39;flags&#39;</span><span class="p">][</span><span class="s">&#39;Cover&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">comp</span><span class="o">.</span><span class="n">flags</span><span class="o">.</span><span class="n">Quad</span>     <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s">&#39;flags&#39;</span><span class="p">][</span><span class="s">&#39;Quad&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">comp</span><span class="o">.</span><span class="n">flags</span><span class="o">.</span><span class="n">Load</span>     <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s">&#39;flags&#39;</span><span class="p">][</span><span class="s">&#39;Load&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">comp</span><span class="o">.</span><span class="n">flags</span><span class="o">.</span><span class="n">wingWarp</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s">&#39;flags&#39;</span><span class="p">][</span><span class="s">&#39;wingWarp&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>

        <span class="n">CFRPType</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s">&#39;flags&#39;</span><span class="p">][</span><span class="s">&#39;CFRPType&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
        <span class="k">if</span> <span class="n">CFRPType</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">comp</span><span class="o">.</span><span class="n">flags</span><span class="o">.</span><span class="n">CFRPType</span> <span class="o">=</span> <span class="s">&#39;NCT301-1X HS40 G150 33 +/-2%RW&#39;</span>
        <span class="k">elif</span> <span class="n">CFRPType</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="n">comp</span><span class="o">.</span><span class="n">flags</span><span class="o">.</span><span class="n">CFRPType</span> <span class="o">=</span> <span class="s">&#39;HexPly 6376 HTS-12K 268gsm 35%RW&#39;</span>
        <span class="k">elif</span> <span class="n">CFRPType</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
            <span class="n">comp</span><span class="o">.</span><span class="n">flags</span><span class="o">.</span><span class="n">CFRPType</span> <span class="o">=</span> <span class="s">&#39;MTM28-1/IM7-GP-145gsm 32 +/-2%Rw&#39;</span>
        <span class="k">elif</span> <span class="n">CFRPType</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
            <span class="n">comp</span><span class="o">.</span><span class="n">flags</span><span class="o">.</span><span class="n">CFRPType</span> <span class="o">=</span> <span class="s">&#39;HexPly 8552 IM7 160gsm 35%RW&#39;</span>
        <span class="k">elif</span> <span class="n">CFRPType</span> <span class="o">==</span> <span class="mi">5</span><span class="p">:</span>
            <span class="n">comp</span><span class="o">.</span><span class="n">flags</span><span class="o">.</span><span class="n">CFRPType</span> <span class="o">=</span> <span class="s">&#39;NCT304-1 HR40 G80 40 +/-2%RW&#39;</span>
        <span class="k">elif</span> <span class="n">CFRPType</span> <span class="o">==</span> <span class="mi">6</span><span class="p">:</span>
            <span class="n">comp</span><span class="o">.</span><span class="n">flags</span><span class="o">.</span><span class="n">CFRPType</span> <span class="o">=</span> <span class="s">&#39;MTM28-1B/M46J-140-37%RW&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s">&#39;Unable to decode CFRPType from MATLAB data&#39;</span><span class="p">)</span>

        <span class="n">WireType</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s">&#39;flags&#39;</span><span class="p">][</span><span class="s">&#39;WireType&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
        <span class="k">if</span> <span class="n">WireType</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">comp</span><span class="o">.</span><span class="n">flags</span><span class="o">.</span><span class="n">WireType</span> <span class="o">=</span> <span class="s">&#39;Pianowire&#39;</span>
        <span class="k">elif</span> <span class="n">WireType</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="n">comp</span><span class="o">.</span><span class="n">flags</span><span class="o">.</span><span class="n">WireType</span> <span class="o">=</span> <span class="s">&#39;Vectran&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s">&#39;Unable to decode WireType from MATLAB data&#39;</span><span class="p">)</span>

        <span class="n">comp</span><span class="o">.</span><span class="n">yN</span>       <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s">&#39;yN&#39;</span><span class="p">]</span>
        <span class="n">comp</span><span class="o">.</span><span class="n">d</span>        <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s">&#39;d&#39;</span><span class="p">]</span>
        <span class="n">comp</span><span class="o">.</span><span class="n">theta</span>    <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s">&#39;theta&#39;</span><span class="p">]</span>
        <span class="n">comp</span><span class="o">.</span><span class="n">nTube</span>    <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s">&#39;nTube&#39;</span><span class="p">]</span>
        <span class="n">comp</span><span class="o">.</span><span class="n">nCap</span>     <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s">&#39;nCap&#39;</span><span class="p">]</span>
        <span class="n">comp</span><span class="o">.</span><span class="n">lBiscuit</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s">&#39;lBiscuit&#39;</span><span class="p">]</span>

        <span class="n">comp</span><span class="o">.</span><span class="n">Jprop</span> <span class="o">=</span> <span class="n">JointProperties</span><span class="p">()</span>
        <span class="n">comp</span><span class="o">.</span><span class="n">Jprop</span><span class="o">.</span><span class="n">d</span>        <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s">&#39;Jprop&#39;</span><span class="p">][</span><span class="s">&#39;d&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">comp</span><span class="o">.</span><span class="n">Jprop</span><span class="o">.</span><span class="n">theta</span>    <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s">&#39;Jprop&#39;</span><span class="p">][</span><span class="s">&#39;theta&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">comp</span><span class="o">.</span><span class="n">Jprop</span><span class="o">.</span><span class="n">nTube</span>    <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s">&#39;Jprop&#39;</span><span class="p">][</span><span class="s">&#39;nTube&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">comp</span><span class="o">.</span><span class="n">Jprop</span><span class="o">.</span><span class="n">nCap</span>     <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s">&#39;Jprop&#39;</span><span class="p">][</span><span class="s">&#39;nCap&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">comp</span><span class="o">.</span><span class="n">Jprop</span><span class="o">.</span><span class="n">lBiscuit</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s">&#39;Jprop&#39;</span><span class="p">][</span><span class="s">&#39;lBiscuit&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>

        <span class="n">comp</span><span class="o">.</span><span class="n">b</span>        <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">comp</span><span class="o">.</span><span class="n">cE</span>       <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s">&#39;cE&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
        <span class="n">comp</span><span class="o">.</span><span class="n">xEA</span>      <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s">&#39;xEA&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
        <span class="n">comp</span><span class="o">.</span><span class="n">xtU</span>      <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s">&#39;xtU&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>

        <span class="n">comp</span><span class="o">.</span><span class="n">dQuad</span>        <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s">&#39;dQuad&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">comp</span><span class="o">.</span><span class="n">thetaQuad</span>    <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s">&#39;thetaQuad&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">comp</span><span class="o">.</span><span class="n">nTubeQuad</span>    <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s">&#39;nTubeQuad&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">comp</span><span class="o">.</span><span class="n">lBiscuitQuad</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s">&#39;lBiscuitQuad&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">comp</span><span class="o">.</span><span class="n">RQuad</span>        <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s">&#39;RQuad&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">comp</span><span class="o">.</span><span class="n">hQuad</span>        <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s">&#39;hQuad&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>

        <span class="n">comp</span><span class="o">.</span><span class="n">ycmax</span>       <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s">&#39;ycmax&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>

        <span class="n">comp</span><span class="o">.</span><span class="n">yWire</span>       <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s">&#39;yWire&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">comp</span><span class="o">.</span><span class="n">zWire</span>       <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s">&#39;zWire&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">comp</span><span class="o">.</span><span class="n">tWire</span>       <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s">&#39;tWire&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">comp</span><span class="o">.</span><span class="n">TWire</span>       <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s">&#39;TWire&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
        <span class="n">comp</span><span class="o">.</span><span class="n">TEtension</span>   <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s">&#39;TEtension&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>

        <span class="n">comp</span><span class="o">.</span><span class="n">mElseRotor</span>  <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s">&#39;mElseRotor&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">comp</span><span class="o">.</span><span class="n">mElseCentre</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s">&#39;mElseCentre&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">comp</span><span class="o">.</span><span class="n">mElseR</span>      <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s">&#39;mElseR&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">comp</span><span class="o">.</span><span class="n">R</span>           <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s">&#39;R&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">comp</span><span class="o">.</span><span class="n">mPilot</span>      <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s">&#39;mPilot&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>

        <span class="n">comp</span><span class="o">.</span><span class="n">fblade</span> <span class="o">=</span> <span class="n">Fblade</span><span class="p">()</span>
        <span class="n">comp</span><span class="o">.</span><span class="n">fblade</span><span class="o">.</span><span class="n">Fx</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s">&#39;Fblade&#39;</span><span class="p">][</span><span class="s">&#39;Fx&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
        <span class="n">comp</span><span class="o">.</span><span class="n">fblade</span><span class="o">.</span><span class="n">Fz</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s">&#39;Fblade&#39;</span><span class="p">][</span><span class="s">&#39;Fz&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
        <span class="n">comp</span><span class="o">.</span><span class="n">fblade</span><span class="o">.</span><span class="n">My</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s">&#39;Fblade&#39;</span><span class="p">][</span><span class="s">&#39;My&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
        <span class="n">comp</span><span class="o">.</span><span class="n">fblade</span><span class="o">.</span><span class="n">Q</span>  <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s">&#39;Fblade&#39;</span><span class="p">][</span><span class="s">&#39;Q&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
        <span class="n">comp</span><span class="o">.</span><span class="n">fblade</span><span class="o">.</span><span class="n">P</span>  <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s">&#39;Fblade&#39;</span><span class="p">][</span><span class="s">&#39;P&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
        <span class="n">comp</span><span class="o">.</span><span class="n">fblade</span><span class="o">.</span><span class="n">Pi</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s">&#39;Fblade&#39;</span><span class="p">][</span><span class="s">&#39;Pi&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
        <span class="n">comp</span><span class="o">.</span><span class="n">fblade</span><span class="o">.</span><span class="n">Pp</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s">&#39;Fblade&#39;</span><span class="p">][</span><span class="s">&#39;Pp&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>

        <span class="n">comp</span><span class="o">.</span><span class="n">presLoad</span> <span class="o">=</span> <span class="n">PrescribedLoad</span><span class="p">()</span>
        <span class="n">comp</span><span class="o">.</span><span class="n">presLoad</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s">&#39;presLoad&#39;</span><span class="p">][</span><span class="s">&#39;y&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">comp</span><span class="o">.</span><span class="n">presLoad</span><span class="o">.</span><span class="n">pointZ</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s">&#39;presLoad&#39;</span><span class="p">][</span><span class="s">&#39;pointZ&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">comp</span><span class="o">.</span><span class="n">presLoad</span><span class="o">.</span><span class="n">pointM</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s">&#39;presLoad&#39;</span><span class="p">][</span><span class="s">&#39;pointM&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">comp</span><span class="o">.</span><span class="n">presLoad</span><span class="o">.</span><span class="n">distributedX</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s">&#39;presLoad&#39;</span><span class="p">][</span><span class="s">&#39;distributedX&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">comp</span><span class="o">.</span><span class="n">presLoad</span><span class="o">.</span><span class="n">distributedZ</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s">&#39;presLoad&#39;</span><span class="p">][</span><span class="s">&#39;distributedZ&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">comp</span><span class="o">.</span><span class="n">presLoad</span><span class="o">.</span><span class="n">distributedM</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s">&#39;presLoad&#39;</span><span class="p">][</span><span class="s">&#39;distributedM&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>

        <span class="c"># run</span>
        <span class="n">comp</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>

        <span class="c"># check outputs</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEquals</span><span class="p">(</span><span class="n">comp</span><span class="o">.</span><span class="n">Mtot</span><span class="p">,</span> <span class="n">data</span><span class="p">[</span><span class="s">&#39;Mtot&#39;</span><span class="p">],</span> <span class="mi">10</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s">&#39;q&#39;</span><span class="p">]):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEquals</span><span class="p">(</span><span class="n">comp</span><span class="o">.</span><span class="n">q</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">val</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span>
                <span class="n">msg</span><span class="o">=</span><span class="s">&#39;q[</span><span class="si">%d</span><span class="s">] is </span><span class="si">%f</span><span class="s">, should be </span><span class="si">%f</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">comp</span><span class="o">.</span><span class="n">q</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">val</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">check_strains</span><span class="p">(</span><span class="n">comp</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">check_failures</span><span class="p">(</span><span class="n">comp</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>

</div></div>
<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">unittest</span><span class="o">.</span><span class="n">main</span><span class="p">()</span>
</pre></div>

          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li><a href="../../../index.html">Atlas 0.1 documentation</a> &raquo;</li>
          <li><a href="../../index.html" >Module code</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright .
      Last updated on Aug 18, 2014.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.2.
    </div>
  </body>
</html>