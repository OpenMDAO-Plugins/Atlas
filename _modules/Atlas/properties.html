<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Atlas.properties &mdash; Atlas 0.1 documentation</title>
    
    <link rel="stylesheet" href="../../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="Atlas 0.1 documentation" href="../../index.html" />
    <link rel="up" title="Module code" href="../index.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li><a href="../../index.html">Atlas 0.1 documentation</a> &raquo;</li>
          <li><a href="../index.html" accesskey="U">Module code</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <h1>Source code for Atlas.properties</h1><div class="highlight"><pre>
<span class="c"># pylint: disable=line-too-long, invalid-name, bad-whitespace, trailing-whitespace, too-many-locals, line-too-long</span>
<span class="kn">from</span> <span class="nn">openmdao.main.api</span> <span class="kn">import</span> <span class="n">Component</span><span class="p">,</span> <span class="n">VariableTree</span>
<span class="kn">from</span> <span class="nn">openmdao.lib.datatypes.api</span> <span class="kn">import</span> <span class="n">Float</span><span class="p">,</span> <span class="n">Array</span><span class="p">,</span> <span class="n">Int</span><span class="p">,</span> <span class="n">Str</span><span class="p">,</span> <span class="n">VarTree</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">math</span> <span class="kn">import</span> <span class="n">pi</span><span class="p">,</span> <span class="n">sin</span><span class="p">,</span> <span class="n">cos</span><span class="p">,</span> <span class="n">floor</span><span class="p">,</span> <span class="n">sqrt</span>


<span class="c"># Material properties of the CFRP prepregs used in the HPH Project.</span>
<span class="c"># Input dy:</span>
<span class="c">#   	type_flag - flag indicating prepreg to be used</span>
<span class="c">#           1 - NCT301-1X HS40 G150 33 +/-2#RW</span>
<span class="c">#           2 - HexPly 6376 HTS-12K 268gsm 35#RW</span>
<span class="c">#           3 - MTM28-1/IM7-GP-145gsm 32 +/-2#RW</span>
<span class="c">#           4 - HexPly 8552 IM7 160gsm 35#RW</span>
<span class="c">#           5 - NCT304-1 HR40 G80 40 +/-2#RW</span>
<span class="c">#           6 - MTM28-1B/M46J-140-37#RW</span>
<span class="c">#</span>
<span class="c"># Output Variables:</span>
<span class="c">#</span>
<span class="c">#       The properties contained in this function are:</span>
<span class="c">#       RHO - Prepreg laminate density [Km/m^3]</span>
<span class="c">#       T_PLY - Ply thickness [m]</span>
<span class="c">#       E_11 - Elastic modulus in the material 11-axis [Pa]</span>
<span class="c">#       E_22 - Elastic modulus in the material 22-axis [Pa]</span>
<span class="c">#       G_12 - Shear modulus in the material 12-axis [Pa]</span>
<span class="c">#       ULTIMATE_11_TENS - Failure strength in the material 11-axis, tension</span>
<span class="c">#       ULTIMATE_11_COMP - Failure strength in the material 11-axis, compression</span>
<span class="c">#       ULTIMATE_22_TENS - Failure strength in the material 22-axis, tension</span>
<span class="c">#       ULTIMATE_22_COMP - Failure strength in the material 22-axis, compression</span>
<span class="c">#       ULTIMATE_12 - Failure strength in shear in the material 12-axis</span>
<span class="c">#       V_12 - Poisson&#39;s ratio of the material in the 12-axis [N/A]</span>
<span class="n">prepregProperties</span> <span class="o">=</span>  <span class="p">{</span>
    <span class="s">&#39;NCT301-1X HS40 G150 33 +/-2%RW&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">&#39;RHO&#39;</span><span class="p">:</span> <span class="mf">1.5806E+03</span><span class="p">,</span>
        <span class="s">&#39;T_PLY&#39;</span><span class="p">:</span> <span class="mf">1.4173E-04</span><span class="p">,</span>
        <span class="s">&#39;E_11&#39;</span><span class="p">:</span> <span class="mf">2.1066E+11</span><span class="p">,</span>
        <span class="s">&#39;E_22&#39;</span><span class="p">:</span> <span class="mf">9.0101E+09</span><span class="p">,</span>
        <span class="s">&#39;G_12&#39;</span><span class="p">:</span> <span class="mf">3.3426E+09</span><span class="p">,</span>
        <span class="s">&#39;V_12&#39;</span><span class="p">:</span> <span class="mf">0.27</span><span class="p">,</span>
        <span class="s">&#39;ULTIMATE_11_TENS&#39;</span><span class="p">:</span> <span class="mf">2.0469E+09</span><span class="p">,</span>
        <span class="s">&#39;ULTIMATE_11_COMP&#39;</span><span class="p">:</span> <span class="mf">8.4593E+08</span><span class="p">,</span>
        <span class="s">&#39;ULTIMATE_22_TENS&#39;</span><span class="p">:</span> <span class="mf">3.4903E+07</span><span class="p">,</span>
        <span class="s">&#39;ULTIMATE_22_COMP&#39;</span><span class="p">:</span> <span class="mf">2.0806E+08</span><span class="p">,</span>
        <span class="s">&#39;ULTIMATE_12&#39;</span><span class="p">:</span> <span class="mf">1.1974E+08</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s">&#39;HexPly 6376 HTS-12K 268gsm 35%RW&#39;</span><span class="p">:</span> <span class="p">{</span>
       <span class="s">&#39;RHO&#39;</span><span class="p">:</span> <span class="mf">1.5763E+03</span><span class="p">,</span>
       <span class="s">&#39;T_PLY&#39;</span><span class="p">:</span> <span class="mf">2.6157E-04</span><span class="p">,</span>
       <span class="s">&#39;E_11&#39;</span><span class="p">:</span> <span class="mf">1.2329E+11</span><span class="p">,</span>
       <span class="s">&#39;E_22&#39;</span><span class="p">:</span> <span class="mf">9.2393E+09</span><span class="p">,</span>
       <span class="s">&#39;G_12&#39;</span><span class="p">:</span> <span class="mf">2.8958E+09</span><span class="p">,</span>
       <span class="s">&#39;V_12&#39;</span><span class="p">:</span> <span class="mf">0.36</span><span class="p">,</span>
       <span class="s">&#39;ULTIMATE_11_TENS&#39;</span><span class="p">:</span> <span class="mf">2.0342E+09</span><span class="p">,</span>
       <span class="s">&#39;ULTIMATE_11_COMP&#39;</span><span class="p">:</span> <span class="mf">1.2689E+09</span><span class="p">,</span>
       <span class="s">&#39;ULTIMATE_22_TENS&#39;</span><span class="p">:</span> <span class="mf">5.7517E+07</span><span class="p">,</span>
       <span class="s">&#39;ULTIMATE_22_COMP&#39;</span><span class="p">:</span> <span class="mf">2.0884E+08</span><span class="p">,</span>
       <span class="s">&#39;ULTIMATE_12&#39;</span><span class="p">:</span> <span class="mf">5.4882E+07</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s">&#39;MTM28-1/IM7-GP-145gsm 32 +/-2%Rw&#39;</span><span class="p">:</span> <span class="p">{</span>
       <span class="s">&#39;RHO&#39;</span><span class="p">:</span> <span class="mf">1530.90379</span><span class="p">,</span>
       <span class="s">&#39;T_PLY&#39;</span><span class="p">:</span> <span class="mf">1.3970E-04</span><span class="p">,</span>
       <span class="s">&#39;E_11&#39;</span><span class="p">:</span> <span class="mf">1.3607E+11</span><span class="p">,</span>
       <span class="s">&#39;E_22&#39;</span><span class="p">:</span> <span class="mf">7.4808E+09</span><span class="p">,</span>
       <span class="s">&#39;G_12&#39;</span><span class="p">:</span> <span class="mf">2.8958E+09</span><span class="p">,</span>
       <span class="s">&#39;V_12&#39;</span><span class="p">:</span> <span class="mf">0.36</span><span class="p">,</span>
       <span class="s">&#39;ULTIMATE_11_TENS&#39;</span><span class="p">:</span> <span class="mf">2.2732E+09</span><span class="p">,</span>
       <span class="s">&#39;ULTIMATE_11_COMP&#39;</span><span class="p">:</span> <span class="mf">1.0378E+09</span><span class="p">,</span>
       <span class="s">&#39;ULTIMATE_22_TENS&#39;</span><span class="p">:</span> <span class="mf">3.7301E+07</span><span class="p">,</span>
       <span class="s">&#39;ULTIMATE_22_COMP&#39;</span><span class="p">:</span> <span class="mf">1.8181E+08</span><span class="p">,</span>
       <span class="s">&#39;ULTIMATE_12&#39;</span><span class="p">:</span> <span class="mf">5.4882E+07</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s">&#39;HexPly 8552 IM7 160gsm 35%RW&#39;</span><span class="p">:</span> <span class="p">{</span>
       <span class="s">&#39;RHO&#39;</span><span class="p">:</span> <span class="mf">1575.7808</span><span class="p">,</span>
       <span class="s">&#39;T_PLY&#39;</span><span class="p">:</span> <span class="mf">1.5669E-04</span><span class="p">,</span>
       <span class="s">&#39;E_11&#39;</span><span class="p">:</span> <span class="mf">1.3410E+11</span><span class="p">,</span>
       <span class="s">&#39;E_22&#39;</span><span class="p">:</span> <span class="mf">8.4806E+09</span><span class="p">,</span>
       <span class="s">&#39;G_12&#39;</span><span class="p">:</span> <span class="mf">4.4816E+09</span><span class="p">,</span>
       <span class="s">&#39;V_12&#39;</span><span class="p">:</span> <span class="mf">0.356</span><span class="p">,</span>
       <span class="s">&#39;ULTIMATE_11_TENS&#39;</span><span class="p">:</span> <span class="mf">1.8805E+09</span><span class="p">,</span>
       <span class="s">&#39;ULTIMATE_11_COMP&#39;</span><span class="p">:</span> <span class="mf">1.5406E+09</span><span class="p">,</span>
       <span class="s">&#39;ULTIMATE_22_TENS&#39;</span><span class="p">:</span> <span class="mf">5.1021E+07</span><span class="p">,</span>
       <span class="s">&#39;ULTIMATE_22_COMP&#39;</span><span class="p">:</span> <span class="mf">2.6745E+08</span><span class="p">,</span>
       <span class="s">&#39;ULTIMATE_12&#39;</span><span class="p">:</span> <span class="mf">8.8598E+07</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s">&#39;NCT304-1 HR40 G80 40 +/-2%RW&#39;</span><span class="p">:</span> <span class="p">{</span>
       <span class="s">&#39;RHO&#39;</span><span class="p">:</span> <span class="mf">1508.2873</span><span class="p">,</span>
       <span class="s">&#39;T_PLY&#39;</span><span class="p">:</span> <span class="mf">9.5250E-05</span><span class="p">,</span>
       <span class="s">&#39;E_11&#39;</span><span class="p">:</span> <span class="mf">1.9010E+11</span><span class="p">,</span>
       <span class="s">&#39;E_22&#39;</span><span class="p">:</span> <span class="mf">9.0101E+09</span><span class="p">,</span>
       <span class="s">&#39;G_12&#39;</span><span class="p">:</span> <span class="mf">3.3426E+09</span><span class="p">,</span>
       <span class="s">&#39;V_12&#39;</span><span class="p">:</span> <span class="mf">0.27</span><span class="p">,</span>
       <span class="s">&#39;ULTIMATE_11_TENS&#39;</span><span class="p">:</span> <span class="mf">2.1614E+09</span><span class="p">,</span>
       <span class="s">&#39;ULTIMATE_11_COMP&#39;</span><span class="p">:</span> <span class="mf">1.0003E+09</span><span class="p">,</span>
       <span class="s">&#39;ULTIMATE_22_TENS&#39;</span><span class="p">:</span> <span class="mf">3.4903E+07</span><span class="p">,</span>
       <span class="s">&#39;ULTIMATE_22_COMP&#39;</span><span class="p">:</span> <span class="mf">2.0806E+08</span><span class="p">,</span>
       <span class="s">&#39;ULTIMATE_12&#39;</span><span class="p">:</span> <span class="mf">1.1974E+08</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s">&#39;MTM28-1B/M46J-140-37%RW&#39;</span><span class="p">:</span> <span class="p">{</span>
       <span class="s">&#39;RHO&#39;</span><span class="p">:</span> <span class="mf">1548.7788</span><span class="p">,</span>
       <span class="s">&#39;T_PLY&#39;</span><span class="p">:</span> <span class="mf">1.4700E-04</span><span class="p">,</span>
       <span class="s">&#39;E_11&#39;</span><span class="p">:</span> <span class="mf">2.1713E+11</span><span class="p">,</span>
       <span class="s">&#39;E_22&#39;</span><span class="p">:</span> <span class="mf">6.7341E+09</span><span class="p">,</span>
       <span class="s">&#39;G_12&#39;</span><span class="p">:</span> <span class="mf">3.3426E+09</span><span class="p">,</span>
       <span class="s">&#39;V_12&#39;</span><span class="p">:</span> <span class="mf">0.27</span><span class="p">,</span>
       <span class="s">&#39;ULTIMATE_11_TENS&#39;</span><span class="p">:</span> <span class="mf">1.9436E+09</span><span class="p">,</span>
       <span class="s">&#39;ULTIMATE_11_COMP&#39;</span><span class="p">:</span> <span class="mf">6.0103E+08</span><span class="p">,</span>
       <span class="s">&#39;ULTIMATE_22_TENS&#39;</span><span class="p">:</span> <span class="mf">1.6470E+07</span><span class="p">,</span>
       <span class="s">&#39;ULTIMATE_22_COMP&#39;</span><span class="p">:</span> <span class="mf">1.4617E+08</span><span class="p">,</span>
       <span class="s">&#39;ULTIMATE_12&#39;</span><span class="p">:</span> <span class="mf">1.0255E+08</span><span class="p">,</span>
    <span class="p">}</span>
<span class="p">}</span>


<span class="n">wireProperties</span> <span class="o">=</span>  <span class="p">{</span>
    <span class="s">&#39;Pianowire&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">&#39;RHO&#39;</span><span class="p">:</span> <span class="mf">7.85e3</span><span class="p">,</span>       <span class="c"># From ASTM228 Standard, Accessed Online at MatWeb</span>
        <span class="s">&#39;E&#39;</span><span class="p">:</span> <span class="mf">2.10e11</span><span class="p">,</span>        <span class="c"># From ASTM228 Standard, Accessed Online at MatWeb</span>
        <span class="s">&#39;ULTIMATE&#39;</span><span class="p">:</span> <span class="mf">2.62e9</span><span class="p">,</span>  <span class="c"># FortePiano.com</span>
        <span class="s">&#39;D&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mf">0.35</span><span class="p">,</span> <span class="mf">0.4</span><span class="p">,</span> <span class="mf">0.45</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.55</span><span class="p">,</span> <span class="mf">0.6</span><span class="p">,</span> <span class="mf">0.65</span><span class="p">,</span> <span class="mf">0.72</span><span class="p">]</span>  <span class="c"># FortePiano.com</span>
    <span class="p">},</span>
    <span class="s">&#39;Vectran&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">&#39;RHO&#39;</span><span class="p">:</span> <span class="mf">1.1065e3</span><span class="p">,</span>
        <span class="s">&#39;E&#39;</span><span class="p">:</span> <span class="mf">3.921e10</span><span class="p">,</span>        <span class="c"># Effective E of braided Vectran, averaged from data supplied by Cortland Cable</span>
        <span class="s">&#39;ULTIMATE&#39;</span><span class="p">:</span> <span class="mf">9.828e8</span><span class="p">,</span>  <span class="c"># Based on minimum tensile strength supplied by Cortland Cable</span>
        <span class="s">&#39;D&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mf">1.5</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>
    <span class="p">},</span>
<span class="p">}</span>


<div class="viewcode-block" id="SparProperties"><a class="viewcode-back" href="../../srcdocs.html#Atlas.properties.SparProperties">[docs]</a><span class="k">class</span> <span class="nc">SparProperties</span><span class="p">(</span><span class="n">Component</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Computes the structural properties of a CFRP spar given the diameter, d,</span>
<span class="sd">        wrap angle, theta, number of tube layers, nTube, and number of cap</span>
<span class="sd">        strips, nCap. Properties are computed for each element along the span,</span>
<span class="sd">        where the node locations are given by yN.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">yN</span>    <span class="o">=</span> <span class="n">Array</span><span class="p">(</span><span class="n">iotype</span><span class="o">=</span><span class="s">&#39;in&#39;</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="s">&#39;node locations for each element along the span&#39;</span><span class="p">)</span>

    <span class="n">d</span>     <span class="o">=</span> <span class="n">Array</span><span class="p">(</span><span class="n">iotype</span><span class="o">=</span><span class="s">&#39;in&#39;</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="s">&#39;diameter&#39;</span><span class="p">)</span>
    <span class="n">theta</span> <span class="o">=</span> <span class="n">Array</span><span class="p">(</span><span class="n">iotype</span><span class="o">=</span><span class="s">&#39;in&#39;</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="s">&#39;wrap angle&#39;</span><span class="p">)</span>
    <span class="n">nTube</span> <span class="o">=</span> <span class="n">Array</span><span class="p">(</span><span class="n">iotype</span><span class="o">=</span><span class="s">&#39;in&#39;</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="s">&#39;number of tube layers&#39;</span><span class="p">)</span>
    <span class="n">nCap</span>  <span class="o">=</span> <span class="n">Array</span><span class="p">(</span><span class="n">iotype</span><span class="o">=</span><span class="s">&#39;in&#39;</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="s">&#39;number of cap strips&#39;</span><span class="p">)</span>

    <span class="n">lBiscuit</span> <span class="o">=</span> <span class="n">Array</span><span class="p">(</span><span class="n">iotype</span><span class="o">=</span><span class="s">&#39;in&#39;</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="s">&#39;description&#39;</span><span class="p">)</span>
    <span class="c">#CFRPType = Int(0, iotype=&#39;in&#39;, desc=&#39;description&#39;)</span>
    <span class="n">CFRPType</span> <span class="o">=</span> <span class="n">Str</span><span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="n">iotype</span><span class="o">=</span><span class="s">&#39;in&#39;</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="s">&#39;description&#39;</span><span class="p">)</span>

    <span class="n">EIx</span> <span class="o">=</span> <span class="n">Array</span><span class="p">(</span><span class="n">iotype</span><span class="o">=</span><span class="s">&#39;out&#39;</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="s">&#39;description&#39;</span><span class="p">)</span>
    <span class="n">EIz</span> <span class="o">=</span> <span class="n">Array</span><span class="p">(</span><span class="n">iotype</span><span class="o">=</span><span class="s">&#39;out&#39;</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="s">&#39;description&#39;</span><span class="p">)</span>
    <span class="n">EA</span>  <span class="o">=</span> <span class="n">Array</span><span class="p">(</span><span class="n">iotype</span><span class="o">=</span><span class="s">&#39;out&#39;</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="s">&#39;description&#39;</span><span class="p">)</span>
    <span class="n">GJ</span>  <span class="o">=</span> <span class="n">Array</span><span class="p">(</span><span class="n">iotype</span><span class="o">=</span><span class="s">&#39;out&#39;</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="s">&#39;description&#39;</span><span class="p">)</span>
    <span class="n">mSpar</span> <span class="o">=</span> <span class="n">Array</span><span class="p">(</span><span class="n">iotype</span><span class="o">=</span><span class="s">&#39;out&#39;</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="s">&#39;description&#39;</span><span class="p">)</span>
    <span class="n">dy</span> <span class="o">=</span> <span class="n">Array</span><span class="p">(</span><span class="n">iotype</span><span class="o">=</span><span class="s">&#39;out&#39;</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="s">&#39;description&#39;</span><span class="p">)</span>

    <span class="c"># yN = Array(np.zeros(2), iotype=&#39;in&#39;, desc=&#39;description&#39;)</span>
    <span class="c"># d = Float(0, iotype=&#39;in&#39;, desc=&#39;description&#39;)</span>
    <span class="c"># theta = Float(0, iotype=&#39;in&#39;, desc=&#39;description&#39;)</span>
    <span class="c"># nTube = Int(0, iotype=&#39;in&#39;, desc=&#39;description&#39;)</span>
    <span class="c"># nCap = Array(np.zeros(2), iotype=&#39;in&#39;, desc=&#39;description&#39;)</span>
    <span class="c"># lBiscuit = Float(0, iotype=&#39;in&#39;, desc=&#39;description&#39;)</span>
    <span class="c"># CFRPType = Int(0, iotype=&#39;in&#39;, desc=&#39;description&#39;)</span>

    <span class="c"># EIx = Float(0, iotype=&#39;out&#39;, desc=&#39;description&#39;)</span>
    <span class="c"># EIz = Float(0, iotype=&#39;out&#39;, desc=&#39;description&#39;)</span>
    <span class="c"># EA = Float(0, iotype=&#39;out&#39;, desc=&#39;description&#39;)</span>
    <span class="c"># GJ = Float(0, iotype=&#39;out&#39;, desc=&#39;description&#39;)</span>
    <span class="c"># mSpar = Float(0, iotype=&#39;out&#39;, desc=&#39;description&#39;)</span>

<div class="viewcode-block" id="SparProperties.execute"><a class="viewcode-back" href="../../srcdocs.html#Atlas.properties.SparProperties.execute">[docs]</a>    <span class="k">def</span> <span class="nf">execute</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># material properties for tube</span>
        <span class="n">pp</span> <span class="o">=</span> <span class="n">prepregProperties</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">CFRPType</span><span class="p">]</span>
        <span class="n">RHO_TUBE</span> <span class="o">=</span> <span class="n">pp</span><span class="p">[</span><span class="s">&#39;RHO&#39;</span><span class="p">]</span>
        <span class="n">T_PLY_TUBE</span> <span class="o">=</span> <span class="n">pp</span><span class="p">[</span><span class="s">&#39;T_PLY&#39;</span><span class="p">]</span>
        <span class="n">E_11_TUBE</span> <span class="o">=</span> <span class="n">pp</span><span class="p">[</span><span class="s">&#39;E_11&#39;</span><span class="p">]</span>
        <span class="n">E_22_TUBE</span> <span class="o">=</span> <span class="n">pp</span><span class="p">[</span><span class="s">&#39;E_22&#39;</span><span class="p">]</span>
        <span class="n">G_12_TUBE</span> <span class="o">=</span> <span class="n">pp</span><span class="p">[</span><span class="s">&#39;G_12&#39;</span><span class="p">]</span>
        <span class="n">V_12_TUBE</span> <span class="o">=</span> <span class="n">pp</span><span class="p">[</span><span class="s">&#39;V_12&#39;</span><span class="p">]</span>

        <span class="c"># material properties for cap</span>
        <span class="n">RHO_CAP</span> <span class="o">=</span> <span class="n">pp</span><span class="p">[</span><span class="s">&#39;RHO&#39;</span><span class="p">]</span>
        <span class="n">T_PLY_CAP</span> <span class="o">=</span> <span class="n">pp</span><span class="p">[</span><span class="s">&#39;T_PLY&#39;</span><span class="p">]</span>
        <span class="n">E_11_CAP</span> <span class="o">=</span> <span class="n">pp</span><span class="p">[</span><span class="s">&#39;E_11&#39;</span><span class="p">]</span>
        <span class="n">G_12_CAP</span> <span class="o">=</span> <span class="n">pp</span><span class="p">[</span><span class="s">&#39;G_12&#39;</span><span class="p">]</span>

        <span class="c"># other material properties</span>
        <span class="n">RHO_BALSA</span> <span class="o">=</span> <span class="mf">160.0</span>           <span class="c"># Materials Database, Balsa</span>
        <span class="n">RHO_STRUCTURAL_FOAM</span> <span class="o">=</span> <span class="mf">31.0</span>  <span class="c"># Materials Database, Rohacell 31 IG-F</span>

        <span class="c"># spar geometry constants</span>
        <span class="n">ALPHA_BASE</span> <span class="o">=</span> <span class="mi">45</span> <span class="o">*</span> <span class="p">(</span><span class="n">pi</span> <span class="o">/</span> <span class="mi">180</span><span class="p">)</span>  <span class="c"># Half-angle of base cap ply width, based on 90-degree rule</span>
        <span class="n">PLY_TAPER_RATIO</span> <span class="o">=</span> <span class="mf">0.05</span>  <span class="c"># Based on HPO wing, 0.05 for 3&quot; spar, ~0.01 for smaller diameters</span>

        <span class="c"># sizing factors</span>
        <span class="n">AF_biscuit</span> <span class="o">=</span> <span class="mf">1.133</span>
        <span class="n">thickness_biscuit_core</span> <span class="o">=</span> <span class="p">(</span><span class="mf">1.0</span> <span class="o">/</span> <span class="mi">4</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="mf">0.0254</span><span class="p">)</span>
        <span class="n">thickness_biscuit_plate</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">*</span> <span class="p">(</span><span class="mf">3.0</span> <span class="o">/</span> <span class="mi">32</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="mf">0.0254</span><span class="p">)</span>
        <span class="n">biscuit_face_fraction</span> <span class="o">=</span> <span class="mf">0.7</span>

        <span class="c"># determine length of each spar element</span>
        <span class="n">Ns</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">yN</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dy</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">Ns</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="p">(</span><span class="n">Ns</span><span class="o">+</span><span class="mi">1</span><span class="p">)):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">dy</span><span class="p">[(</span><span class="n">s</span><span class="o">-</span><span class="mi">1</span><span class="p">)]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">yN</span><span class="p">[(</span><span class="n">s</span><span class="p">)]</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">yN</span><span class="p">[(</span><span class="n">s</span><span class="o">-</span><span class="mi">1</span><span class="p">)]</span>

        <span class="c"># Pre-allocate EIx, EIz, EA, GJ, mSpar</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">EIx</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">Ns</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">EIz</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">Ns</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">EA</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">Ns</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">GJ</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">Ns</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mSpar</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">Ns</span><span class="p">)</span>

        <span class="c"># Pre-populate Q matrix for composite angle transformation</span>
        <span class="n">Q</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>  <span class="c"># Preallocate Q-matrix</span>

        <span class="c"># matrix of elastic constants</span>
        <span class="n">Q</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">E_11_TUBE</span>
        <span class="n">Q</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">E_22_TUBE</span>
        <span class="n">Q</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">E_22_TUBE</span> <span class="o">*</span> <span class="n">V_12_TUBE</span>
        <span class="n">Q</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">Q</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
        <span class="n">Q</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">G_12_TUBE</span>

        <span class="c"># compute EIx, EIz, EA, GJ, mSpar for each element</span>
        <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="p">(</span><span class="n">Ns</span><span class="o">+</span><span class="mi">1</span><span class="p">)):</span>
            <span class="c"># Determine E_xx_tube and G_xy_tube using Q_Transform Code</span>
            <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theta</span><span class="p">[(</span><span class="n">s</span><span class="o">-</span><span class="mi">1</span><span class="p">)]</span>  <span class="c"># Composite angle (in radians)</span>

            <span class="c"># Transformation matrix</span>
            <span class="n">T</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span>
                <span class="p">[</span><span class="n">cos</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span><span class="p">,</span>       <span class="n">sin</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span><span class="p">,</span>      <span class="mi">2</span><span class="o">*</span><span class="n">sin</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">*</span><span class="n">cos</span><span class="p">(</span><span class="n">x</span><span class="p">)],</span>
                <span class="p">[</span><span class="n">sin</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span><span class="p">,</span>       <span class="n">cos</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span><span class="p">,</span>     <span class="o">-</span><span class="mi">2</span><span class="o">*</span><span class="n">sin</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">*</span><span class="n">cos</span><span class="p">(</span><span class="n">x</span><span class="p">)],</span>
                <span class="p">[</span><span class="o">-</span><span class="n">sin</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">*</span><span class="n">cos</span><span class="p">(</span><span class="n">x</span><span class="p">),</span>  <span class="n">sin</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">*</span><span class="n">cos</span><span class="p">(</span><span class="n">x</span><span class="p">),</span> <span class="p">(</span><span class="n">cos</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span><span class="o">-</span><span class="p">(</span><span class="n">sin</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span><span class="p">)]</span>
            <span class="p">])</span>

            <span class="c"># Transform the elastic constants using the transformation matrix</span>
            <span class="c"># to obtain the elastic constants at the composite angle.</span>
            <span class="c">#</span>
            <span class="c"># MATLAB version of this line is</span>
            <span class="c">#    Qbar = (T\Q)/T&#39;;</span>
            <span class="c"># backslash is left division</span>
            <span class="c"># linalg.lstsq(x,y)</span>
            <span class="c"># another place says</span>
            <span class="c">#   linalg.solve(a,b)</span>
            <span class="c"># b[np.newaxis].T</span>
            <span class="c">#Qbar = (np.linalg.solve(T,Q)) / T.T # ???</span>
            <span class="c">#</span>
            <span class="c"># A/B is A*inv(B)</span>
            <span class="c"># A\B is inv(A)*B</span>
            <span class="c">#Qbar = (np.linalg.lstsq(T,Q)) / T[np.newaxis].T</span>
            <span class="c">#Qbar = (np.linalg.inv(T) * Q ) *  np.linalg.inv(T[np.newaxis].T)</span>
            <span class="n">Qbar</span> <span class="o">=</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">linalg</span><span class="o">.</span><span class="n">inv</span><span class="p">(</span><span class="n">T</span><span class="p">)</span> <span class="o">*</span> <span class="n">Q</span><span class="p">)</span> <span class="o">*</span>  <span class="n">np</span><span class="o">.</span><span class="n">linalg</span><span class="o">.</span><span class="n">inv</span><span class="p">(</span><span class="n">T</span><span class="o">.</span><span class="n">transpose</span><span class="p">())</span>
            <span class="c">#print T</span>
            <span class="c">#print (np.linalg.inv(T) * Q )</span>
            <span class="n">b</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linalg</span><span class="o">.</span><span class="n">solve</span><span class="p">(</span><span class="n">T</span><span class="p">,</span> <span class="n">Q</span><span class="p">)</span>
            <span class="n">a</span> <span class="o">=</span> <span class="n">T</span><span class="o">.</span><span class="n">T</span>
            <span class="n">QbarT</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linalg</span><span class="o">.</span><span class="n">solve</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">T</span><span class="p">,</span> <span class="n">b</span><span class="o">.</span><span class="n">T</span><span class="p">)</span>
            <span class="c">#print QbarT.T</span>
            <span class="c">#print T.transpose() * np.linalg.inv( np.linalg.solve(T,Q) )</span>
            <span class="c">#print T.transpose()</span>
            <span class="n">Qbar</span> <span class="o">=</span> <span class="n">QbarT</span><span class="o">.</span><span class="n">T</span>

            <span class="c"># Breakout tube elastic constants at the transformed angle</span>
            <span class="n">E_xx_tube</span> <span class="o">=</span> <span class="n">Qbar</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
            <span class="n">G_xy_tube</span> <span class="o">=</span> <span class="n">Qbar</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>

            <span class="c"># I Tube</span>
            <span class="n">I_tube</span> <span class="o">=</span> <span class="n">pi</span> <span class="o">*</span> <span class="p">(((</span><span class="bp">self</span><span class="o">.</span><span class="n">d</span><span class="p">[(</span><span class="n">s</span><span class="o">-</span><span class="mi">1</span><span class="p">)]</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="mf">1.0</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">nTube</span><span class="p">[(</span><span class="n">s</span><span class="o">-</span><span class="mi">1</span><span class="p">)]</span> <span class="o">*</span> <span class="n">T_PLY_TUBE</span><span class="p">)</span> <span class="o">**</span> <span class="mi">3</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nTube</span><span class="p">[(</span><span class="n">s</span><span class="o">-</span><span class="mi">1</span><span class="p">)]</span> <span class="o">*</span> <span class="n">T_PLY_TUBE</span><span class="p">)</span>

            <span class="c"># A Tube</span>
            <span class="n">A_tube</span> <span class="o">=</span> <span class="n">pi</span> <span class="o">*</span> <span class="p">((((</span><span class="bp">self</span><span class="o">.</span><span class="n">d</span><span class="p">[(</span><span class="n">s</span><span class="o">-</span><span class="mi">1</span><span class="p">)]</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">nTube</span><span class="p">[(</span><span class="n">s</span><span class="o">-</span><span class="mi">1</span><span class="p">)]</span> <span class="o">*</span> <span class="n">T_PLY_TUBE</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)</span> <span class="o">-</span> <span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">d</span><span class="p">[(</span><span class="n">s</span><span class="o">-</span><span class="mi">1</span><span class="p">)]</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span><span class="p">))</span>

            <span class="c"># Initialize Ix_cap(s) (In-plane), Iz_cap(s) (Out-of-plane), A_cap</span>
            <span class="n">Ix_cap_0</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="n">Iz_cap_0</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="n">A_cap_0</span>  <span class="o">=</span> <span class="mi">0</span>
            <span class="n">Ix_cap_1</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="n">Iz_cap_1</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="n">A_cap_1</span>  <span class="o">=</span> <span class="mi">0</span>

            <span class="c"># Linearly interpolate between discrete values of nCap</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">nCap</span><span class="p">[(</span><span class="n">s</span><span class="o">-</span><span class="mi">1</span><span class="p">)]</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">nCap</span><span class="p">[(</span><span class="n">s</span><span class="o">-</span><span class="mi">1</span><span class="p">)]</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="n">nCap_0</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">floor</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nCap</span><span class="p">[(</span><span class="n">s</span><span class="o">-</span><span class="mi">1</span><span class="p">)]))</span>
            <span class="n">nCap_1</span> <span class="o">=</span> <span class="n">nCap_0</span> <span class="o">+</span> <span class="mi">1</span>

            <span class="k">if</span> <span class="n">nCap_0</span> <span class="o">!=</span>  <span class="mi">0</span><span class="p">:</span>
                <span class="n">width_ply_0</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">nCap_0</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">width_ply_0</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
            <span class="n">width_ply_1</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">nCap_1</span><span class="p">)</span>

            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="p">(</span><span class="n">nCap_0</span><span class="o">+</span><span class="mi">1</span><span class="p">)):</span>
                <span class="c"># width_ply_0  =  [0.060 0.056 0.052 0.048 0.044 0.040 0.036 0.032]; % Spar 2009-1 cap widths</span>
                <span class="c"># width_ply_0  =  [0.060 0.056 0.052 0.048 0.044 0.040 0.036 0.032 0.028 0.024]; % Spar 2009-2 &amp; 2009-3 cap widths</span>
                <span class="n">width_ply_0</span><span class="p">[(</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">)]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">d</span><span class="p">[(</span><span class="n">s</span><span class="o">-</span><span class="mi">1</span><span class="p">)]</span> <span class="o">*</span> <span class="n">ALPHA_BASE</span> <span class="o">-</span> <span class="p">(</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">PLY_TAPER_RATIO</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">d</span><span class="p">[(</span><span class="n">s</span><span class="o">-</span><span class="mi">1</span><span class="p">)])</span>  <span class="c"># Sets base cap width from 90 degree rule, tapers each subsequent layer based on tube diameter</span>
                <span class="n">alpha_ply</span> <span class="o">=</span> <span class="n">width_ply_0</span><span class="p">[(</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">)]</span> <span class="o">/</span> <span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">d</span><span class="p">[(</span><span class="n">s</span><span class="o">-</span><span class="mi">1</span><span class="p">)]</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">nTube</span><span class="p">[(</span><span class="n">s</span><span class="o">-</span><span class="mi">1</span><span class="p">)]</span> <span class="o">*</span> <span class="n">T_PLY_TUBE</span> <span class="o">+</span> <span class="p">(</span><span class="n">i</span> <span class="o">-</span> <span class="p">(</span><span class="mf">1.0</span> <span class="o">/</span> <span class="mi">2</span><span class="p">))</span> <span class="o">*</span> <span class="n">T_PLY_CAP</span><span class="p">))</span>
                <span class="n">Ix_cap_0</span> <span class="o">=</span> <span class="n">Ix_cap_0</span> <span class="o">+</span> <span class="mi">2</span> <span class="o">*</span> <span class="p">(</span><span class="n">alpha_ply</span> <span class="o">*</span> <span class="p">(((</span><span class="bp">self</span><span class="o">.</span><span class="n">d</span><span class="p">[(</span><span class="n">s</span><span class="o">-</span><span class="mi">1</span><span class="p">)]</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="n">i</span> <span class="o">-</span> <span class="p">(</span><span class="mf">1.0</span> <span class="o">/</span> <span class="mi">2</span><span class="p">))</span> <span class="o">*</span> <span class="p">(</span><span class="n">T_PLY_CAP</span><span class="p">))</span> <span class="o">**</span> <span class="mi">3</span><span class="p">)</span> <span class="o">*</span> <span class="n">T_PLY_CAP</span><span class="p">)</span>
                <span class="n">Iz_cap_0</span> <span class="o">=</span> <span class="n">Iz_cap_0</span> <span class="o">+</span> <span class="mi">2</span> <span class="o">*</span> <span class="p">((</span><span class="n">alpha_ply</span> <span class="o">+</span> <span class="p">(</span><span class="mf">1.0</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="n">sin</span><span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">alpha_ply</span><span class="p">))</span> <span class="o">*</span> <span class="p">(((</span><span class="bp">self</span><span class="o">.</span><span class="n">d</span><span class="p">[(</span><span class="n">s</span><span class="o">-</span><span class="mi">1</span><span class="p">)]</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="n">i</span> <span class="o">-</span> <span class="p">(</span><span class="mf">1.0</span> <span class="o">/</span> <span class="mi">2</span><span class="p">))</span> <span class="o">*</span> <span class="p">(</span><span class="n">T_PLY_CAP</span><span class="p">))</span> <span class="o">**</span> <span class="mi">3</span><span class="p">)</span> <span class="o">*</span> <span class="n">T_PLY_CAP</span><span class="p">)</span>
                <span class="n">A_cap_0</span> <span class="o">=</span> <span class="n">A_cap_0</span> <span class="o">+</span> <span class="mi">2</span> <span class="o">*</span> <span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">alpha_ply</span> <span class="o">*</span> <span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">d</span><span class="p">[(</span><span class="n">s</span><span class="o">-</span><span class="mi">1</span><span class="p">)]</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="n">i</span> <span class="o">-</span> <span class="p">(</span><span class="mf">1.0</span> <span class="o">/</span> <span class="mi">2</span><span class="p">))</span> <span class="o">*</span> <span class="p">(</span><span class="n">T_PLY_CAP</span><span class="p">))</span> <span class="o">*</span> <span class="n">T_PLY_CAP</span><span class="p">)</span>

            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="p">(</span><span class="n">nCap_1</span><span class="o">+</span><span class="mi">1</span><span class="p">)):</span>
                <span class="c"># width_ply_1  =  [0.060 0.056 0.052 0.048 0.044 0.040 0.036 0.032]; % Spar 2009-1 cap widths</span>
                <span class="c"># width_ply_1  =  [0.060 0.056 0.052 0.048 0.044 0.040 0.036 0.032 0.028 0.024]; % Spar 2009-2 &amp; 2009-3 cap widths</span>
                <span class="n">width_ply_1</span><span class="p">[(</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">)]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">d</span><span class="p">[(</span><span class="n">s</span><span class="o">-</span><span class="mi">1</span><span class="p">)]</span> <span class="o">*</span> <span class="n">ALPHA_BASE</span> <span class="o">-</span> <span class="p">(</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">PLY_TAPER_RATIO</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">d</span><span class="p">[(</span><span class="n">s</span><span class="o">-</span><span class="mi">1</span><span class="p">)])</span>
                <span class="n">alpha_ply</span> <span class="o">=</span> <span class="n">width_ply_1</span><span class="p">[(</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">)]</span> <span class="o">/</span> <span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">d</span><span class="p">[(</span><span class="n">s</span><span class="o">-</span><span class="mi">1</span><span class="p">)]</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">nTube</span><span class="p">[(</span><span class="n">s</span><span class="o">-</span><span class="mi">1</span><span class="p">)]</span> <span class="o">*</span> <span class="n">T_PLY_TUBE</span> <span class="o">+</span> <span class="p">(</span><span class="n">i</span> <span class="o">-</span> <span class="p">(</span><span class="mf">1.0</span> <span class="o">/</span> <span class="mi">2</span><span class="p">))</span> <span class="o">*</span> <span class="n">T_PLY_CAP</span><span class="p">))</span>
                <span class="n">Ix_cap_1</span> <span class="o">=</span> <span class="n">Ix_cap_1</span> <span class="o">+</span> <span class="mi">2</span> <span class="o">*</span> <span class="p">(</span><span class="n">alpha_ply</span> <span class="o">*</span> <span class="p">(((</span><span class="bp">self</span><span class="o">.</span><span class="n">d</span><span class="p">[(</span><span class="n">s</span><span class="o">-</span><span class="mi">1</span><span class="p">)]</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="n">i</span> <span class="o">-</span> <span class="p">(</span><span class="mf">1.0</span> <span class="o">/</span> <span class="mi">2</span><span class="p">))</span> <span class="o">*</span> <span class="p">(</span><span class="n">T_PLY_CAP</span><span class="p">))</span> <span class="o">**</span> <span class="mi">3</span><span class="p">)</span> <span class="o">*</span> <span class="n">T_PLY_CAP</span><span class="p">)</span>
                <span class="n">Iz_cap_1</span> <span class="o">=</span> <span class="n">Iz_cap_1</span> <span class="o">+</span> <span class="mi">2</span> <span class="o">*</span> <span class="p">((</span><span class="n">alpha_ply</span> <span class="o">+</span> <span class="p">(</span><span class="mf">1.0</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="n">sin</span><span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">alpha_ply</span><span class="p">))</span> <span class="o">*</span> <span class="p">(((</span><span class="bp">self</span><span class="o">.</span><span class="n">d</span><span class="p">[(</span><span class="n">s</span><span class="o">-</span><span class="mi">1</span><span class="p">)]</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="n">i</span> <span class="o">-</span> <span class="p">(</span><span class="mf">1.0</span> <span class="o">/</span> <span class="mi">2</span><span class="p">))</span> <span class="o">*</span> <span class="p">(</span><span class="n">T_PLY_CAP</span><span class="p">))</span> <span class="o">**</span> <span class="mi">3</span><span class="p">)</span> <span class="o">*</span> <span class="n">T_PLY_CAP</span><span class="p">)</span>
                <span class="n">A_cap_1</span> <span class="o">=</span> <span class="n">A_cap_1</span> <span class="o">+</span> <span class="mi">2</span> <span class="o">*</span> <span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">alpha_ply</span> <span class="o">*</span> <span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">d</span><span class="p">[(</span><span class="n">s</span><span class="o">-</span><span class="mi">1</span><span class="p">)]</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="n">i</span> <span class="o">-</span> <span class="p">(</span><span class="mf">1.0</span> <span class="o">/</span> <span class="mi">2</span><span class="p">))</span> <span class="o">*</span> <span class="p">(</span><span class="n">T_PLY_CAP</span><span class="p">))</span> <span class="o">*</span> <span class="n">T_PLY_CAP</span><span class="p">)</span>

            <span class="n">Ix_cap</span> <span class="o">=</span> <span class="n">Ix_cap_0</span> <span class="o">+</span> <span class="p">(</span><span class="n">Ix_cap_1</span> <span class="o">-</span> <span class="n">Ix_cap_0</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nCap</span><span class="p">[(</span><span class="n">s</span><span class="o">-</span><span class="mi">1</span><span class="p">)]</span> <span class="o">-</span> <span class="n">nCap_0</span><span class="p">)</span>
            <span class="n">Iz_cap</span> <span class="o">=</span> <span class="n">Iz_cap_0</span> <span class="o">+</span> <span class="p">(</span><span class="n">Iz_cap_1</span> <span class="o">-</span> <span class="n">Iz_cap_0</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nCap</span><span class="p">[(</span><span class="n">s</span><span class="o">-</span><span class="mi">1</span><span class="p">)]</span> <span class="o">-</span> <span class="n">nCap_0</span><span class="p">)</span>
            <span class="n">A_cap</span> <span class="o">=</span> <span class="n">A_cap_0</span> <span class="o">+</span> <span class="p">(</span><span class="n">A_cap_1</span> <span class="o">-</span> <span class="n">A_cap_0</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nCap</span><span class="p">[(</span><span class="n">s</span><span class="o">-</span><span class="mi">1</span><span class="p">)]</span> <span class="o">-</span> <span class="n">nCap_0</span><span class="p">)</span>

            <span class="c"># GJ spar</span>
            <span class="n">r_tube_avg</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">d</span><span class="p">[(</span><span class="n">s</span><span class="o">-</span><span class="mi">1</span><span class="p">)]</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="mf">1.0</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">nTube</span><span class="p">[(</span><span class="n">s</span><span class="o">-</span><span class="mi">1</span><span class="p">)]</span> <span class="o">*</span> <span class="n">T_PLY_TUBE</span>
            <span class="n">r_cap_avg</span> <span class="o">=</span> <span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">d</span><span class="p">[(</span><span class="n">s</span><span class="o">-</span><span class="mi">1</span><span class="p">)]</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">nTube</span><span class="p">[(</span><span class="n">s</span><span class="o">-</span><span class="mi">1</span><span class="p">)]</span> <span class="o">*</span> <span class="n">T_PLY_TUBE</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="mf">1.0</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">nCap</span><span class="p">[(</span><span class="n">s</span><span class="o">-</span><span class="mi">1</span><span class="p">)]</span> <span class="o">*</span> <span class="n">T_PLY_CAP</span>
            <span class="n">width_cap_avg</span> <span class="o">=</span> <span class="p">(</span><span class="mf">1.0</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">width_ply_0</span><span class="p">)</span> <span class="o">+</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">width_ply_1</span><span class="p">))</span>
            <span class="n">t_cap_avg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">nCap</span><span class="p">[(</span><span class="n">s</span><span class="o">-</span><span class="mi">1</span><span class="p">)]</span> <span class="o">*</span> <span class="n">T_PLY_CAP</span>  <span class="c"># Do not know if the average is actually necessary here, and this value is close regardless</span>
            <span class="n">r_spar_avg</span> <span class="o">=</span> <span class="p">((</span><span class="n">pi</span> <span class="o">*</span> <span class="n">r_tube_avg</span> <span class="o">-</span> <span class="n">width_cap_avg</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">pi</span> <span class="o">*</span> <span class="n">r_tube_avg</span><span class="p">))</span> <span class="o">*</span> <span class="p">(</span><span class="n">r_tube_avg</span><span class="p">)</span> <span class="o">+</span> <span class="p">((</span><span class="n">width_cap_avg</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">pi</span> <span class="o">*</span> <span class="n">r_tube_avg</span><span class="p">))</span> <span class="o">*</span> <span class="p">(</span><span class="n">r_cap_avg</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">GJ</span><span class="p">[(</span><span class="n">s</span><span class="o">-</span><span class="mi">1</span><span class="p">)]</span> <span class="o">=</span> <span class="p">(</span><span class="mi">4</span> <span class="o">*</span> <span class="p">(</span><span class="n">pi</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">r_spar_avg</span> <span class="o">**</span> <span class="mi">4</span><span class="p">))</span> <span class="o">/</span> <span class="p">(((</span><span class="mi">2</span> <span class="o">*</span> <span class="n">pi</span> <span class="o">*</span> <span class="n">r_tube_avg</span> <span class="o">-</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">width_cap_avg</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">G_xy_tube</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">nTube</span><span class="p">[(</span><span class="n">s</span><span class="o">-</span><span class="mi">1</span><span class="p">)]</span> <span class="o">*</span> <span class="n">T_PLY_TUBE</span><span class="p">))</span> <span class="o">+</span> <span class="p">((</span><span class="mi">2</span> <span class="o">*</span> <span class="n">width_cap_avg</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">G_xy_tube</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">nTube</span><span class="p">[(</span><span class="n">s</span><span class="o">-</span><span class="mi">1</span><span class="p">)]</span> <span class="o">*</span> <span class="n">T_PLY_TUBE</span> <span class="o">+</span> <span class="n">G_12_CAP</span> <span class="o">*</span> <span class="n">t_cap_avg</span><span class="p">)))</span>

            <span class="c"># Biscuit mass</span>
            <span class="n">mass_biscuit</span> <span class="o">=</span> <span class="p">(</span><span class="n">AF_biscuit</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dy</span><span class="p">[(</span><span class="n">s</span><span class="o">-</span><span class="mi">1</span><span class="p">)]</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">lBiscuit</span><span class="p">[(</span><span class="n">s</span><span class="o">-</span><span class="mi">1</span><span class="p">)])</span> <span class="o">*</span> <span class="p">((</span><span class="n">pi</span> <span class="o">*</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">d</span><span class="p">[(</span><span class="n">s</span><span class="o">-</span><span class="mi">1</span><span class="p">)]</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">RHO_BALSA</span> <span class="o">*</span> <span class="n">thickness_biscuit_plate</span> <span class="o">*</span> <span class="n">biscuit_face_fraction</span> <span class="o">+</span> <span class="n">RHO_STRUCTURAL_FOAM</span> <span class="o">*</span> <span class="n">thickness_biscuit_core</span><span class="p">))</span>

            <span class="c"># Determine Total Spar Properties</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">EIx</span><span class="p">[(</span><span class="n">s</span><span class="o">-</span><span class="mi">1</span><span class="p">)]</span> <span class="o">=</span> <span class="n">E_xx_tube</span> <span class="o">*</span> <span class="n">I_tube</span> <span class="o">+</span> <span class="n">E_11_CAP</span> <span class="o">*</span> <span class="n">Ix_cap</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">EIz</span><span class="p">[(</span><span class="n">s</span><span class="o">-</span><span class="mi">1</span><span class="p">)]</span> <span class="o">=</span> <span class="n">E_xx_tube</span> <span class="o">*</span> <span class="n">I_tube</span> <span class="o">+</span> <span class="n">E_11_CAP</span> <span class="o">*</span> <span class="n">Iz_cap</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">EA</span><span class="p">[(</span><span class="n">s</span><span class="o">-</span><span class="mi">1</span><span class="p">)]</span> <span class="o">=</span> <span class="n">E_xx_tube</span> <span class="o">*</span> <span class="n">A_tube</span> <span class="o">+</span> <span class="n">E_11_CAP</span> <span class="o">*</span> <span class="n">A_cap</span>
            <span class="c">#print A_tube, RHO_TUBE , A_cap , RHO_CAP, self.dy[(s-1)] , mass_biscuit</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">mSpar</span><span class="p">[(</span><span class="n">s</span><span class="o">-</span><span class="mi">1</span><span class="p">)]</span> <span class="o">=</span> <span class="p">(</span><span class="n">A_tube</span> <span class="o">*</span> <span class="n">RHO_TUBE</span> <span class="o">+</span> <span class="n">A_cap</span> <span class="o">*</span> <span class="n">RHO_CAP</span><span class="p">)</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">dy</span><span class="p">[(</span><span class="n">s</span><span class="o">-</span><span class="mi">1</span><span class="p">)]</span> <span class="o">+</span> <span class="n">mass_biscuit</span>

</div></div>
<div class="viewcode-block" id="JointProperties"><a class="viewcode-back" href="../../srcdocs.html#Atlas.properties.JointProperties">[docs]</a><span class="k">class</span> <span class="nc">JointProperties</span><span class="p">(</span><span class="n">VariableTree</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Properties at joint location for buckling analysis &quot;&quot;&quot;</span>
    <span class="n">d</span>        <span class="o">=</span> <span class="n">Float</span><span class="p">(</span><span class="n">desc</span><span class="o">=</span><span class="s">&#39;diameter&#39;</span><span class="p">)</span>
    <span class="n">theta</span>    <span class="o">=</span> <span class="n">Float</span><span class="p">(</span><span class="n">desc</span><span class="o">=</span><span class="s">&#39;wrap angle&#39;</span><span class="p">)</span>
    <span class="n">nTube</span>    <span class="o">=</span> <span class="n">Int</span><span class="p">(</span><span class="n">desc</span><span class="o">=</span><span class="s">&#39;number of tube layers&#39;</span><span class="p">)</span>
    <span class="n">nCap</span>     <span class="o">=</span> <span class="n">Int</span><span class="p">(</span><span class="n">desc</span><span class="o">=</span><span class="s">&#39;number of cap strips&#39;</span><span class="p">)</span>
    <span class="n">lBiscuit</span> <span class="o">=</span> <span class="n">Float</span><span class="p">(</span><span class="n">desc</span><span class="o">=</span><span class="s">&#39;unsupported biscuit length&#39;</span><span class="p">)</span>

</div>
<div class="viewcode-block" id="JointSparProperties"><a class="viewcode-back" href="../../srcdocs.html#Atlas.properties.JointSparProperties">[docs]</a><span class="k">class</span> <span class="nc">JointSparProperties</span><span class="p">(</span><span class="n">SparProperties</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; subclass of SparProperties for the joints</span>
<span class="sd">        (needed to dynamically create yN and get other properties from Jprop)</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c"># inputs</span>
    <span class="n">Jprop</span> <span class="o">=</span> <span class="n">VarTree</span><span class="p">(</span><span class="n">JointProperties</span><span class="p">(),</span> <span class="n">iotype</span><span class="o">=</span><span class="s">&#39;in&#39;</span><span class="p">)</span>

<div class="viewcode-block" id="JointSparProperties.execute"><a class="viewcode-back" href="../../srcdocs.html#Atlas.properties.JointSparProperties.execute">[docs]</a>    <span class="k">def</span> <span class="nf">execute</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">yN</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">d</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">Jprop</span><span class="o">.</span><span class="n">d</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">theta</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">Jprop</span><span class="o">.</span><span class="n">theta</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nTube</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">Jprop</span><span class="o">.</span><span class="n">nTube</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nCap</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">Jprop</span><span class="o">.</span><span class="n">nCap</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lBiscuit</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">Jprop</span><span class="o">.</span><span class="n">lBiscuit</span><span class="p">]</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">JointSparProperties</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">execute</span><span class="p">()</span>

</div></div>
<div class="viewcode-block" id="QuadSparProperties"><a class="viewcode-back" href="../../srcdocs.html#Atlas.properties.QuadSparProperties">[docs]</a><span class="k">class</span> <span class="nc">QuadSparProperties</span><span class="p">(</span><span class="n">SparProperties</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; subclass of SparProperties for the QuadCopter-specific spars</span>
<span class="sd">        (needed to dynamically create yN and nCap and provide scalar I/O)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c"># inputs</span>
    <span class="n">dQuad</span>     <span class="o">=</span> <span class="n">Float</span><span class="p">(</span><span class="n">iotype</span><span class="o">=</span><span class="s">&#39;in&#39;</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="s">&#39;&#39;</span><span class="p">)</span>
    <span class="n">thetaQuad</span> <span class="o">=</span> <span class="n">Float</span><span class="p">(</span><span class="n">iotype</span><span class="o">=</span><span class="s">&#39;in&#39;</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="s">&#39;&#39;</span><span class="p">)</span>
    <span class="n">nTubeQuad</span> <span class="o">=</span> <span class="n">Int</span><span class="p">(</span><span class="n">iotype</span><span class="o">=</span><span class="s">&#39;in&#39;</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="s">&#39;number of tube layers&#39;</span><span class="p">)</span>
    <span class="n">lBiscuitQuad</span> <span class="o">=</span> <span class="n">Float</span><span class="p">(</span><span class="n">iotype</span><span class="o">=</span><span class="s">&#39;in&#39;</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="s">&#39;&#39;</span><span class="p">)</span>

    <span class="n">RQuad</span>  <span class="o">=</span> <span class="n">Float</span><span class="p">(</span><span class="n">iotype</span><span class="o">=</span><span class="s">&#39;in&#39;</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="s">&#39;distance from centre of helicopter to centre of quad rotors&#39;</span><span class="p">)</span>
    <span class="n">hQuad</span>  <span class="o">=</span> <span class="n">Float</span><span class="p">(</span><span class="n">iotype</span><span class="o">=</span><span class="s">&#39;in&#39;</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="s">&#39;height of quad-rotor truss&#39;</span><span class="p">)</span>

    <span class="c"># outputs</span>
    <span class="n">mQuad</span>        <span class="o">=</span> <span class="n">Float</span><span class="p">(</span><span class="n">iotype</span><span class="o">=</span><span class="s">&#39;out&#39;</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="s">&#39;mass of Quad spar (scalar&#39;</span><span class="p">)</span>

<div class="viewcode-block" id="QuadSparProperties.execute"><a class="viewcode-back" href="../../srcdocs.html#Atlas.properties.QuadSparProperties.execute">[docs]</a>    <span class="k">def</span> <span class="nf">execute</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">lQuad</span> <span class="o">=</span> <span class="n">sqrt</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">RQuad</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">hQuad</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">yN</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="n">lQuad</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nCap</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">d</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">dQuad</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">theta</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">thetaQuad</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nTube</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">nTubeQuad</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lBiscuit</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">lBiscuitQuad</span><span class="p">]</span>

        <span class="nb">super</span><span class="p">(</span><span class="n">QuadSparProperties</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">execute</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">mQuad</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mSpar</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

</div></div>
<div class="viewcode-block" id="DiscretizeProperties"><a class="viewcode-back" href="../../srcdocs.html#Atlas.properties.DiscretizeProperties">[docs]</a><span class="k">class</span> <span class="nc">DiscretizeProperties</span><span class="p">(</span><span class="n">Component</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Discretize properties along rotor blade. Y defines the locations at which</span>
<span class="sd">    the properties are defined. Properties are linearly interpolated between</span>
<span class="sd">    Y locations.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c"># inputs</span>
    <span class="n">Ns</span>          <span class="o">=</span> <span class="n">Int</span><span class="p">(</span><span class="n">iotype</span><span class="o">=</span><span class="s">&#39;in&#39;</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="s">&#39;number of elements&#39;</span><span class="p">)</span>
    <span class="n">ycmax</span>       <span class="o">=</span> <span class="n">Array</span><span class="p">(</span><span class="n">iotype</span><span class="o">=</span><span class="s">&#39;in&#39;</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="s">&#39;&#39;</span><span class="p">)</span>
    <span class="n">R</span>           <span class="o">=</span> <span class="n">Float</span><span class="p">(</span><span class="n">iotype</span><span class="o">=</span><span class="s">&#39;in&#39;</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="s">&#39;&#39;</span><span class="p">)</span>
    <span class="n">c_in</span>        <span class="o">=</span> <span class="n">Array</span><span class="p">(</span><span class="n">iotype</span><span class="o">=</span><span class="s">&#39;in&#39;</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="s">&#39;&#39;</span><span class="p">)</span>
    <span class="n">Cl_in</span>       <span class="o">=</span> <span class="n">Array</span><span class="p">(</span><span class="n">iotype</span><span class="o">=</span><span class="s">&#39;in&#39;</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="s">&#39;&#39;</span><span class="p">)</span>
    <span class="n">Cm_in</span>       <span class="o">=</span> <span class="n">Array</span><span class="p">(</span><span class="n">iotype</span><span class="o">=</span><span class="s">&#39;in&#39;</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="s">&#39;&#39;</span><span class="p">)</span>
    <span class="n">t_in</span>        <span class="o">=</span> <span class="n">Array</span><span class="p">(</span><span class="n">iotype</span><span class="o">=</span><span class="s">&#39;in&#39;</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="s">&#39;&#39;</span><span class="p">)</span>
    <span class="n">xtU_in</span>      <span class="o">=</span> <span class="n">Array</span><span class="p">(</span><span class="n">iotype</span><span class="o">=</span><span class="s">&#39;in&#39;</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="s">&#39;&#39;</span><span class="p">)</span>
    <span class="n">xtL_in</span>      <span class="o">=</span> <span class="n">Array</span><span class="p">(</span><span class="n">iotype</span><span class="o">=</span><span class="s">&#39;in&#39;</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="s">&#39;&#39;</span><span class="p">)</span>
    <span class="n">xEA_in</span>      <span class="o">=</span> <span class="n">Array</span><span class="p">(</span><span class="n">iotype</span><span class="o">=</span><span class="s">&#39;in&#39;</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="s">&#39;&#39;</span><span class="p">)</span>
    <span class="n">yWire</span>       <span class="o">=</span> <span class="n">Array</span><span class="p">(</span><span class="n">iotype</span><span class="o">=</span><span class="s">&#39;in&#39;</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="s">&#39;&#39;</span><span class="p">)</span>
    <span class="n">d_in</span>        <span class="o">=</span> <span class="n">Array</span><span class="p">(</span><span class="n">iotype</span><span class="o">=</span><span class="s">&#39;in&#39;</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="s">&#39;&#39;</span><span class="p">)</span>
    <span class="n">theta_in</span>    <span class="o">=</span> <span class="n">Array</span><span class="p">(</span><span class="n">iotype</span><span class="o">=</span><span class="s">&#39;in&#39;</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="s">&#39;&#39;</span><span class="p">)</span>
    <span class="n">nTube_in</span>    <span class="o">=</span> <span class="n">Array</span><span class="p">(</span><span class="n">iotype</span><span class="o">=</span><span class="s">&#39;in&#39;</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="s">&#39;&#39;</span><span class="p">)</span>
    <span class="n">nCap_in</span>     <span class="o">=</span> <span class="n">Array</span><span class="p">(</span><span class="n">iotype</span><span class="o">=</span><span class="s">&#39;in&#39;</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="s">&#39;&#39;</span><span class="p">)</span>
    <span class="n">lBiscuit_in</span> <span class="o">=</span> <span class="n">Array</span><span class="p">(</span><span class="n">iotype</span><span class="o">=</span><span class="s">&#39;in&#39;</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="s">&#39;&#39;</span><span class="p">)</span>

    <span class="c"># outputs</span>
    <span class="n">cE</span>       <span class="o">=</span> <span class="n">Array</span><span class="p">(</span><span class="n">iotype</span><span class="o">=</span><span class="s">&#39;out&#39;</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="s">&#39;chord of each element&#39;</span><span class="p">)</span>
    <span class="n">cN</span>       <span class="o">=</span> <span class="n">Array</span><span class="p">(</span><span class="n">iotype</span><span class="o">=</span><span class="s">&#39;out&#39;</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="s">&#39;chord at each node&#39;</span><span class="p">)</span>
    <span class="n">c100</span>     <span class="o">=</span> <span class="n">Array</span><span class="p">(</span><span class="n">iotype</span><span class="o">=</span><span class="s">&#39;out&#39;</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="s">&#39;&#39;</span><span class="p">)</span>
    <span class="n">Cl</span>       <span class="o">=</span> <span class="n">Array</span><span class="p">(</span><span class="n">iotype</span><span class="o">=</span><span class="s">&#39;out&#39;</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="s">&#39;lift coefficient&#39;</span><span class="p">)</span>
    <span class="n">Cm</span>       <span class="o">=</span> <span class="n">Array</span><span class="p">(</span><span class="n">iotype</span><span class="o">=</span><span class="s">&#39;out&#39;</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="s">&#39;&#39;</span><span class="p">)</span>
    <span class="n">t</span>        <span class="o">=</span> <span class="n">Array</span><span class="p">(</span><span class="n">iotype</span><span class="o">=</span><span class="s">&#39;out&#39;</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="s">&#39;airfoil thickness&#39;</span><span class="p">)</span>
    <span class="n">xtU</span>      <span class="o">=</span> <span class="n">Array</span><span class="p">(</span><span class="n">iotype</span><span class="o">=</span><span class="s">&#39;out&#39;</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="s">&#39;&#39;</span><span class="p">)</span>
    <span class="n">xtL</span>      <span class="o">=</span> <span class="n">Array</span><span class="p">(</span><span class="n">iotype</span><span class="o">=</span><span class="s">&#39;out&#39;</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="s">&#39;&#39;</span><span class="p">)</span>
    <span class="n">xEA</span>      <span class="o">=</span> <span class="n">Array</span><span class="p">(</span><span class="n">iotype</span><span class="o">=</span><span class="s">&#39;out&#39;</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="s">&#39;&#39;</span><span class="p">)</span>
    <span class="n">d</span>        <span class="o">=</span> <span class="n">Array</span><span class="p">(</span><span class="n">iotype</span><span class="o">=</span><span class="s">&#39;out&#39;</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="s">&#39;spar diameter&#39;</span><span class="p">)</span>
    <span class="n">theta</span>    <span class="o">=</span> <span class="n">Array</span><span class="p">(</span><span class="n">iotype</span><span class="o">=</span><span class="s">&#39;out&#39;</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="s">&#39;CFRP wrap angle&#39;</span><span class="p">)</span>
    <span class="n">nTube</span>    <span class="o">=</span> <span class="n">Array</span><span class="p">(</span><span class="n">iotype</span><span class="o">=</span><span class="s">&#39;out&#39;</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="s">&#39;&#39;</span><span class="p">)</span>
    <span class="n">nCap</span>     <span class="o">=</span> <span class="n">Array</span><span class="p">(</span><span class="n">iotype</span><span class="o">=</span><span class="s">&#39;out&#39;</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="s">&#39;&#39;</span><span class="p">)</span>
    <span class="n">lBiscuit</span> <span class="o">=</span> <span class="n">Array</span><span class="p">(</span><span class="n">iotype</span><span class="o">=</span><span class="s">&#39;out&#39;</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="s">&#39;&#39;</span><span class="p">)</span>
    <span class="n">yN</span>       <span class="o">=</span> <span class="n">Array</span><span class="p">(</span><span class="n">iotype</span><span class="o">=</span><span class="s">&#39;out&#39;</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="s">&#39;node locations&#39;</span><span class="p">)</span>
    <span class="n">yE</span>       <span class="o">=</span> <span class="n">Array</span><span class="p">(</span><span class="n">iotype</span><span class="o">=</span><span class="s">&#39;out&#39;</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="s">&#39;&#39;</span><span class="p">)</span>

<div class="viewcode-block" id="DiscretizeProperties.execute"><a class="viewcode-back" href="../../srcdocs.html#Atlas.properties.DiscretizeProperties.execute">[docs]</a>    <span class="k">def</span> <span class="nf">execute</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">yN</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Ns</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cN</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Ns</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">sTrans</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Ns</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">yE</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Ns</span><span class="p">)</span>
        <span class="n">cR</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Ns</span><span class="p">)</span>
        <span class="n">cZ</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Ns</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cE</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Ns</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Cl</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Ns</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Cm</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Ns</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">t</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Ns</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">xtU</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Ns</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">xtL</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Ns</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">xEA</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Ns</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">d</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Ns</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">theta</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Ns</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nTube</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Ns</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nCap</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Ns</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lBiscuit</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Ns</span><span class="p">)</span>
        <span class="n">Ns100</span> <span class="o">=</span> <span class="mi">100</span>
        <span class="n">yN100</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">Ns100</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">yE100</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">Ns100</span><span class="p">)</span>
        <span class="n">cR100</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
        <span class="n">cZ100</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">c100</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>

        <span class="c"># compute node locations</span>
        <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Ns</span><span class="o">+</span><span class="mi">1</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">yN</span><span class="p">[</span><span class="n">s</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">R</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">Ns</span><span class="o">*</span><span class="n">s</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">yN</span><span class="p">[</span><span class="n">s</span><span class="p">]</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">ycmax</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
                <span class="n">sTrans</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">s</span><span class="o">+</span><span class="mi">1</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">yN</span><span class="p">[</span><span class="n">s</span><span class="p">]</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">ycmax</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span>
                <span class="n">sTrans</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">s</span><span class="o">+</span><span class="mi">1</span>

        <span class="c"># compute element locations</span>
        <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Ns</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">yE</span><span class="p">[</span><span class="n">s</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">yN</span><span class="p">[</span><span class="n">s</span><span class="p">]</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">yN</span><span class="p">[</span><span class="n">s</span><span class="o">+</span><span class="mi">1</span><span class="p">])</span>

        <span class="c"># compute chord lengths at elements</span>
        <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Ns</span><span class="p">):</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">s</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">sTrans</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
                <span class="c"># root section</span>
                <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">yE</span><span class="p">[</span><span class="n">s</span><span class="p">]</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">ycmax</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">cE</span><span class="p">[</span><span class="n">s</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">c_in</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">x</span> <span class="o">*</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">c_in</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">c_in</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c"># chord section</span>
                <span class="c"># compute curve component</span>
                <span class="n">x</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">yE</span><span class="p">[</span><span class="n">s</span><span class="p">]</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">ycmax</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">R</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">ycmax</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
                <span class="n">pStart</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">c_in</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
                <span class="n">pCurve</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">c_in</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
                <span class="n">pEnd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">c_in</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span>
                <span class="n">xx</span> <span class="o">=</span> <span class="n">x</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">pCurve</span><span class="p">)</span> <span class="o">+</span> <span class="n">sin</span><span class="p">(</span><span class="n">x</span> <span class="o">*</span> <span class="n">pi</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="n">pCurve</span>
                <span class="n">cZ</span><span class="p">[</span><span class="n">s</span><span class="p">]</span> <span class="o">=</span> <span class="n">pStart</span> <span class="o">+</span> <span class="p">(</span><span class="n">pEnd</span> <span class="o">-</span> <span class="n">pStart</span><span class="p">)</span> <span class="o">*</span> <span class="n">xx</span>

                <span class="c"># compute 1/r component</span>
                <span class="n">c3</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">c_in</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">/</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">c_in</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">R</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">ycmax</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
                <span class="n">cR</span><span class="p">[</span><span class="n">s</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">c_in</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">R</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">yE</span><span class="p">[</span><span class="n">s</span><span class="p">]</span> <span class="o">*</span> <span class="p">(</span><span class="n">c3</span> <span class="o">+</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">c3</span><span class="p">)</span> <span class="o">*</span> <span class="n">x</span><span class="p">)</span>

                <span class="c"># average based on c_in(2)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">cE</span><span class="p">[</span><span class="n">s</span><span class="p">]</span> <span class="o">=</span> <span class="n">cR</span><span class="p">[</span><span class="n">s</span><span class="p">]</span> <span class="o">+</span> <span class="p">(</span><span class="n">cZ</span><span class="p">[</span><span class="n">s</span><span class="p">]</span> <span class="o">-</span> <span class="n">cR</span><span class="p">[</span><span class="n">s</span><span class="p">])</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">c_in</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">cE</span><span class="p">[</span><span class="n">s</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">cE</span><span class="p">[</span><span class="n">s</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.001</span>

        <span class="c"># compute chord for display purposes</span>
        <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">Ns100</span><span class="o">+</span><span class="mi">2</span><span class="p">):</span>
            <span class="n">yN100</span><span class="p">[</span><span class="n">s</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">R</span> <span class="o">/</span> <span class="n">Ns100</span> <span class="o">*</span> <span class="p">(</span><span class="n">s</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">all</span><span class="p">(</span><span class="n">yN100</span><span class="p">[</span><span class="n">s</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">ycmax</span><span class="p">):</span>
                <span class="n">sTrans100</span> <span class="o">=</span> <span class="n">s</span>

        <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">Ns100</span><span class="p">):</span>
            <span class="n">yE100</span><span class="p">[</span><span class="n">s</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="p">(</span><span class="n">yN100</span><span class="p">[</span><span class="n">s</span><span class="p">]</span> <span class="o">+</span> <span class="n">yN100</span><span class="p">[</span><span class="n">s</span><span class="o">+</span><span class="mi">1</span><span class="p">])</span>

        <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">Ns100</span><span class="p">):</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">s</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">sTrans100</span><span class="p">:</span>
                <span class="c"># root section</span>
                <span class="n">x</span> <span class="o">=</span> <span class="n">yE100</span><span class="p">[</span><span class="n">s</span><span class="p">]</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">ycmax</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">c100</span><span class="p">[</span><span class="n">s</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">c_in</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">x</span> <span class="o">*</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">c_in</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">c_in</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c"># chord section</span>
                <span class="c"># compute chord component</span>
                <span class="n">x</span> <span class="o">=</span> <span class="p">(</span><span class="n">yE100</span><span class="p">[</span><span class="n">s</span><span class="p">]</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">ycmax</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">R</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">ycmax</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
                <span class="n">pStart</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">c_in</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
                <span class="n">pCurve</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">c_in</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
                <span class="n">pEnd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">c_in</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span>
                <span class="n">xx</span> <span class="o">=</span> <span class="n">x</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">pCurve</span><span class="p">)</span> <span class="o">+</span> <span class="n">sin</span><span class="p">(</span><span class="n">x</span> <span class="o">*</span> <span class="n">pi</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="n">pCurve</span>
                <span class="n">cZ100</span><span class="p">[</span><span class="n">s</span><span class="p">]</span> <span class="o">=</span> <span class="n">pStart</span> <span class="o">+</span> <span class="p">(</span><span class="n">pEnd</span> <span class="o">-</span> <span class="n">pStart</span><span class="p">)</span> <span class="o">*</span> <span class="n">xx</span>

                <span class="c"># compute 1/r component</span>
                <span class="n">c3</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">c_in</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">/</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">c_in</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">R</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">ycmax</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
                <span class="n">cR100</span><span class="p">[</span><span class="n">s</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">c_in</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">R</span> <span class="o">/</span> <span class="n">yE100</span><span class="p">[</span><span class="n">s</span><span class="p">]</span> <span class="o">*</span> <span class="p">(</span><span class="n">c3</span> <span class="o">+</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">c3</span><span class="p">)</span> <span class="o">*</span> <span class="n">x</span><span class="p">)</span>

                <span class="c"># average based on c_in(2)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">c100</span><span class="p">[</span><span class="n">s</span><span class="p">]</span> <span class="o">=</span> <span class="n">cR100</span><span class="p">[</span><span class="n">s</span><span class="p">]</span> <span class="o">+</span> <span class="p">(</span><span class="n">cZ100</span><span class="p">[</span><span class="n">s</span><span class="p">]</span> <span class="o">-</span> <span class="n">cR100</span><span class="p">[</span><span class="n">s</span><span class="p">])</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">c_in</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">c100</span><span class="p">[</span><span class="n">s</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">c100</span><span class="p">[</span><span class="n">s</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.001</span>

        <span class="c"># Compute aero properties for each element</span>
        <span class="n">Y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">ycmax</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">ycmax</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">R</span><span class="p">])</span>
        <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Ns</span><span class="p">):</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">s</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">sTrans</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
                <span class="c"># root section</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">Cl</span><span class="p">[</span><span class="n">s</span><span class="p">]</span>  <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Cl_in</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">Cm</span><span class="p">[</span><span class="n">s</span><span class="p">]</span>  <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Cm_in</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">t</span><span class="p">[</span><span class="n">s</span><span class="p">]</span>   <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">t_in</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">xEA</span><span class="p">[</span><span class="n">s</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">xEA_in</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c"># check which segment the element is on</span>
                <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">max</span><span class="p">(</span><span class="n">Y</span><span class="o">.</span><span class="n">shape</span><span class="p">)):</span>
                    <span class="k">if</span> <span class="n">Y</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">yE</span><span class="p">[</span><span class="n">s</span><span class="p">]:</span>
                        <span class="k">break</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">s</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span> <span class="o">==</span> <span class="n">sTrans</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
                    <span class="n">j</span> <span class="o">=</span> <span class="mi">1</span>
                <span class="n">x</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">yE</span><span class="p">[</span><span class="n">s</span><span class="p">]</span> <span class="o">-</span> <span class="n">Y</span><span class="p">[</span><span class="n">j</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="p">(</span><span class="n">Y</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">-</span> <span class="n">Y</span><span class="p">[</span><span class="n">j</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>

                <span class="c"># linearly interpolate between Y(j) and Y(j-1)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">Cl</span> <span class="p">[</span><span class="n">s</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Cl_in</span> <span class="p">[</span><span class="n">j</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>  <span class="o">+</span>  <span class="n">x</span> <span class="o">*</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Cl_in</span> <span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">Cl_in</span> <span class="p">[</span><span class="n">j</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">Cm</span> <span class="p">[</span><span class="n">s</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Cm_in</span> <span class="p">[</span><span class="n">j</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>  <span class="o">+</span>  <span class="n">x</span> <span class="o">*</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Cm_in</span> <span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">Cm_in</span> <span class="p">[</span><span class="n">j</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">t</span>  <span class="p">[</span><span class="n">s</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">t_in</span>  <span class="p">[</span><span class="n">j</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>  <span class="o">+</span>  <span class="n">x</span> <span class="o">*</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">t_in</span>  <span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">t_in</span>  <span class="p">[</span><span class="n">j</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">xEA</span><span class="p">[</span><span class="n">s</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">xEA_in</span><span class="p">[</span><span class="n">j</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>  <span class="o">+</span>  <span class="n">x</span> <span class="o">*</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">xEA_in</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">xEA_in</span><span class="p">[</span><span class="n">j</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">Cl</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">Ns</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Cl</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">Ns</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="mi">2</span><span class="o">/</span><span class="mi">3</span>

        <span class="c"># compute xtU and xtL for each element</span>
        <span class="c"># changes instantly from xtU(1) to xtU(3) at point xtU(2)</span>
        <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">Ns</span><span class="o">+</span><span class="mi">1</span><span class="p">):</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">yN</span><span class="p">[</span><span class="n">s</span><span class="p">]</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">ycmax</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
                <span class="n">sTrans</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">s</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">yN</span><span class="p">[</span><span class="n">s</span><span class="p">]</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">xtU_in</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span>
                <span class="n">sTrans</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">s</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Ns</span><span class="p">):</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">s</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">sTrans</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
                <span class="c"># root section</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">xtU</span><span class="p">[</span><span class="n">s</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.05</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">xtL</span><span class="p">[</span><span class="n">s</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.05</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">s</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">sTrans</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">xtU</span><span class="p">[</span><span class="n">s</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">xtU_in</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">xtL</span><span class="p">[</span><span class="n">s</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">xtL_in</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="k">elif</span> <span class="p">(</span><span class="n">s</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span> <span class="o">==</span> <span class="n">sTrans</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span>
                    <span class="n">x</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">xtU_in</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">yN</span><span class="p">[</span><span class="n">s</span><span class="p">])</span> <span class="o">/</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">yN</span><span class="p">[</span><span class="n">s</span><span class="p">]</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">yN</span><span class="p">[</span><span class="n">s</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">xtU</span><span class="p">[</span><span class="n">s</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">x</span><span class="p">)</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">xtU_in</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">x</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">xtU_in</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">xtL</span><span class="p">[</span><span class="n">s</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">x</span><span class="p">)</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">xtL_in</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">x</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">xtL_in</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
                <span class="k">elif</span> <span class="p">(</span><span class="n">s</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">sTrans</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">xtU</span><span class="p">[</span><span class="n">s</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">xtU_in</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">xtL</span><span class="p">[</span><span class="n">s</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">xtL_in</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>

        <span class="c"># compute str properties for each element</span>
        <span class="n">Y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">yWire</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">R</span><span class="p">])</span>
        <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Ns</span><span class="p">):</span>
            <span class="c"># check which segment the lement is on</span>
            <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">max</span><span class="p">(</span><span class="n">Y</span><span class="o">.</span><span class="n">shape</span><span class="p">)):</span>
                <span class="k">if</span> <span class="n">Y</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">yE</span><span class="p">[</span><span class="n">s</span><span class="p">]:</span>
                    <span class="k">break</span>
            <span class="n">x</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">yE</span><span class="p">[</span><span class="n">s</span><span class="p">]</span> <span class="o">-</span> <span class="n">Y</span><span class="p">[</span><span class="n">j</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="p">(</span><span class="n">Y</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">-</span> <span class="n">Y</span><span class="p">[</span><span class="n">j</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>

            <span class="c"># linearly interpolate between Y(j) and Y(j-1)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">d</span>       <span class="p">[</span><span class="n">s</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">d_in</span>       <span class="p">[</span><span class="n">j</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">x</span> <span class="o">*</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">d_in</span>       <span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">d_in</span>       <span class="p">[</span><span class="n">j</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">theta</span>   <span class="p">[</span><span class="n">s</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theta_in</span>   <span class="p">[</span><span class="n">j</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">x</span> <span class="o">*</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">theta_in</span>   <span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">theta_in</span>   <span class="p">[</span><span class="n">j</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">nTube</span>   <span class="p">[</span><span class="n">s</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">nTube_in</span>   <span class="p">[</span><span class="n">j</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">x</span> <span class="o">*</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nTube_in</span>   <span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">nTube_in</span>   <span class="p">[</span><span class="n">j</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">nCap</span>    <span class="p">[</span><span class="n">s</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">nCap</span>       <span class="p">[</span><span class="n">j</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">x</span> <span class="o">*</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nCap</span>       <span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">nCap</span>       <span class="p">[</span><span class="n">j</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">lBiscuit</span><span class="p">[</span><span class="n">s</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">lBiscuit_in</span><span class="p">[</span><span class="n">j</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">x</span> <span class="o">*</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">lBiscuit_in</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">lBiscuit_in</span><span class="p">[</span><span class="n">j</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>

</div></div>
<div class="viewcode-block" id="ChordProperties"><a class="viewcode-back" href="../../srcdocs.html#Atlas.properties.ChordProperties">[docs]</a><span class="k">class</span> <span class="nc">ChordProperties</span><span class="p">(</span><span class="n">Component</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Computes the mass of the ribs, trailing edge, LE-sheeting and covering</span>
<span class="sd">    given the chord. The mass is computed for each spanwise element. If</span>
<span class="sd">    flagTESpar is 1 then the mass of a trailing edge spar and in-plane truss</span>
<span class="sd">    is added as well.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c"># inputs</span>
    <span class="n">yN</span> <span class="o">=</span> <span class="n">Array</span><span class="p">(</span><span class="n">iotype</span><span class="o">=</span><span class="s">&#39;in&#39;</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="s">&#39;node locations&#39;</span><span class="p">)</span>
    <span class="n">c</span>  <span class="o">=</span> <span class="n">Array</span><span class="p">(</span><span class="n">iotype</span><span class="o">=</span><span class="s">&#39;in&#39;</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="s">&#39;chord&#39;</span><span class="p">)</span>
    <span class="n">d</span>  <span class="o">=</span> <span class="n">Array</span><span class="p">(</span><span class="n">iotype</span><span class="o">=</span><span class="s">&#39;in&#39;</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="s">&#39;spar diameter&#39;</span><span class="p">)</span>
    <span class="n">GWing</span> <span class="o">=</span> <span class="n">Int</span><span class="p">(</span><span class="n">iotype</span><span class="o">=</span><span class="s">&#39;in&#39;</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="s">&#39;0 - Daedalus style wing, 1 - Gossamer style wing (changes amount of laminar flow)&#39;</span><span class="p">)</span>
    <span class="n">xtU</span> <span class="o">=</span> <span class="n">Array</span><span class="p">(</span><span class="n">iotype</span><span class="o">=</span><span class="s">&#39;in&#39;</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="s">&#39;&#39;</span><span class="p">)</span>

    <span class="c"># outputs</span>
    <span class="n">mChord</span>   <span class="o">=</span> <span class="n">Array</span><span class="p">(</span><span class="n">iotype</span><span class="o">=</span><span class="s">&#39;out&#39;</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="s">&#39;mass of chords&#39;</span><span class="p">)</span>
    <span class="n">xCGChord</span> <span class="o">=</span> <span class="n">Array</span><span class="p">(</span><span class="n">iotype</span><span class="o">=</span><span class="s">&#39;out&#39;</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="s">&#39;&#39;</span><span class="p">)</span>

<div class="viewcode-block" id="ChordProperties.execute"><a class="viewcode-back" href="../../srcdocs.html#Atlas.properties.ChordProperties.execute">[docs]</a>    <span class="k">def</span> <span class="nf">execute</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="c"># Determine the length of each spar element</span>
        <span class="n">Ns</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">yN</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span>
        <span class="n">dy</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">Ns</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="p">(</span><span class="n">Ns</span><span class="o">+</span><span class="mi">1</span><span class="p">)):</span>
            <span class="n">dy</span><span class="p">[(</span><span class="n">s</span><span class="o">-</span><span class="mi">1</span><span class="p">)]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">yN</span><span class="p">[(</span><span class="n">s</span><span class="p">)]</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">yN</span><span class="p">[(</span><span class="n">s</span><span class="o">-</span><span class="mi">1</span><span class="p">)]</span>  <span class="c"># length of each element</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mChord</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">Ns</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">xCGChord</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">Ns</span><span class="p">)</span>

        <span class="c"># Material properties</span>
        <span class="n">RHO_BALSA</span> <span class="o">=</span> <span class="mf">160.0</span>
        <span class="n">RHO_BASSWOOD</span> <span class="o">=</span> <span class="mf">387.0</span>
        <span class="n">RHO_CARBON</span> <span class="o">=</span> <span class="mf">1610.6</span>
        <span class="n">T_PLY_CARBON</span> <span class="o">=</span> <span class="mf">0.000147</span>
        <span class="n">RHO_EPS</span> <span class="o">=</span> <span class="mf">16.0</span>
        <span class="n">RHO_KEVLAR</span> <span class="o">=</span> <span class="mf">1300.0</span>
        <span class="n">T_PLY_KEVLAR</span> <span class="o">=</span> <span class="mf">0.000127</span>
        <span class="n">RHO_MYLAR</span> <span class="o">=</span> <span class="mf">1400.0</span>
        <span class="n">T_MYLAR</span> <span class="o">=</span> <span class="mf">1.2e-05</span>
        <span class="n">RHO_STRUCTURAL_FOAM</span> <span class="o">=</span> <span class="mf">31.0</span>
        <span class="n">RHO_XPS</span> <span class="o">=</span> <span class="mf">24.67</span>
        <span class="n">RHO_STEEL_WIRE</span> <span class="o">=</span> <span class="mf">7850.0</span>

        <span class="c"># Airfoil Geometry Properties (DT1068156, HPO root airfoil)</span>
        <span class="n">AREA_AIRFOIL</span> <span class="o">=</span> <span class="mf">0.08233</span>
        <span class="n">PERIMETER_AIRFOIL</span> <span class="o">=</span> <span class="mf">2.06814</span>
        <span class="n">XCG_AIRFOIL</span> <span class="o">=</span> <span class="mf">0.39003</span>

        <span class="c"># Wing Design Variables</span>
        <span class="n">thickness_rib</span> <span class="o">=</span> <span class="mf">0.005</span>
        <span class="n">rib_spacing</span> <span class="o">=</span> <span class="mi">12</span> <span class="o">*</span> <span class="p">(</span><span class="mf">0.0254</span><span class="p">)</span>
        <span class="n">thickness_LE_sheeting</span> <span class="o">=</span> <span class="mf">0.003</span>
        <span class="n">thickness_rib_caps</span> <span class="o">=</span> <span class="p">(</span><span class="mf">1.0</span> <span class="o">/</span> <span class="mi">32</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="mf">0.0254</span><span class="p">)</span>
        <span class="n">percent_rib_caps</span> <span class="o">=</span> <span class="mf">0.97</span>
        <span class="n">thickness_spar_plate</span> <span class="o">=</span> <span class="p">(</span><span class="mf">1.0</span> <span class="o">/</span> <span class="mi">32</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="mf">0.0254</span><span class="p">)</span>
        <span class="n">percent_radius_spar_plate</span> <span class="o">=</span> <span class="mf">0.0632</span>
        <span class="n">percent_LE_sheeting_top</span> <span class="o">=</span> <span class="mf">0.6</span>
        <span class="n">percent_LE_sheeting_top_GWing</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">xtU</span>
        <span class="n">percent_LE_sheeting_bottom</span> <span class="o">=</span> <span class="mf">0.1</span>
        <span class="n">d_TE_spar</span> <span class="o">=</span> <span class="p">(</span><span class="mf">3.0</span> <span class="o">/</span> <span class="mi">4</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="mf">0.0254</span><span class="p">)</span>
        <span class="n">nTube_TE_spar</span> <span class="o">=</span> <span class="mi">4</span>
        <span class="n">d_comp_member</span> <span class="o">=</span> <span class="p">(</span><span class="mf">3.0</span> <span class="o">/</span> <span class="mi">4</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="mf">0.0254</span><span class="p">)</span>
        <span class="n">nTube_comp_member</span> <span class="o">=</span> <span class="mi">4</span>
        <span class="n">spacing_comp_member</span> <span class="o">=</span> <span class="mi">3</span>
        <span class="n">percent_length_comp_member</span> <span class="o">=</span> <span class="mf">0.782</span> <span class="o">-</span> <span class="mf">0.25</span>
        <span class="n">d_cross_bracing</span> <span class="o">=</span> <span class="mf">0.001</span>
        <span class="n">height_TE_foam</span> <span class="o">=</span> <span class="mf">0.007</span>
        <span class="n">length_TE_foam</span> <span class="o">=</span> <span class="mf">0.0505</span>
        <span class="n">percent_height_TE_plate</span> <span class="o">=</span> <span class="mf">0.05</span>
        <span class="n">percent_length_TE_plate</span> <span class="o">=</span> <span class="mf">0.24</span>
        <span class="n">thickness_TE_plate</span> <span class="o">=</span> <span class="p">(</span><span class="mf">1.0</span> <span class="o">/</span> <span class="mi">32</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="mf">0.0254</span><span class="p">)</span>
        <span class="n">diameter_piano_wire</span> <span class="o">=</span> <span class="p">(</span><span class="mf">0.022</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="mf">0.0254</span><span class="p">)</span>
        <span class="n">spar_location</span> <span class="o">=</span> <span class="mf">0.25</span>

        <span class="c"># Adjustment Factors</span>
        <span class="n">AF_ribs</span> <span class="o">=</span> <span class="mf">1.569</span>
        <span class="n">AF_TE</span> <span class="o">=</span> <span class="mf">1.602</span>
        <span class="n">AF_leading_edge_sheeting</span> <span class="o">=</span> <span class="mf">1.302</span>
        <span class="n">AF_leading_edge_sheeting_GWing</span> <span class="o">=</span> <span class="mf">1.21</span>
        <span class="n">AF_covering</span> <span class="o">=</span> <span class="mf">0.972</span>
        <span class="n">AF_TE_spar</span> <span class="o">=</span> <span class="mf">0.529</span>
        <span class="n">AF_comp_member</span> <span class="o">=</span> <span class="mf">1.0</span>
        <span class="n">AF_cross_bracing</span> <span class="o">=</span> <span class="mf">4.603</span>

        <span class="c"># Compute mChord for each element</span>
        <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="p">(</span><span class="n">Ns</span><span class="o">+</span><span class="mi">1</span><span class="p">)):</span>
            <span class="c"># Rib Mass &amp; Xcg</span>
            <span class="n">mass_rib_foam</span> <span class="o">=</span> <span class="n">RHO_EPS</span> <span class="o">*</span> <span class="p">(</span><span class="n">thickness_rib</span> <span class="o">*</span> <span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">c</span><span class="p">[(</span><span class="n">s</span><span class="o">-</span><span class="mi">1</span><span class="p">)]</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="n">AREA_AIRFOIL</span><span class="p">))</span>
            <span class="n">mass_rib_caps</span> <span class="o">=</span> <span class="n">RHO_BASSWOOD</span> <span class="o">*</span> <span class="p">(</span><span class="n">thickness_rib</span> <span class="o">*</span> <span class="n">thickness_rib_caps</span> <span class="o">*</span> <span class="p">(</span><span class="n">percent_rib_caps</span> <span class="o">*</span> <span class="n">PERIMETER_AIRFOIL</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">c</span><span class="p">[(</span><span class="n">s</span><span class="o">-</span><span class="mi">1</span><span class="p">)]))</span>
            <span class="n">mass_rib_plate_spar</span> <span class="o">=</span> <span class="n">RHO_BALSA</span> <span class="o">*</span> <span class="p">(</span><span class="n">thickness_spar_plate</span> <span class="o">*</span> <span class="p">(</span><span class="n">pi</span> <span class="o">*</span> <span class="p">(((</span><span class="bp">self</span><span class="o">.</span><span class="n">c</span><span class="p">[(</span><span class="n">s</span><span class="o">-</span><span class="mi">1</span><span class="p">)]</span> <span class="o">*</span> <span class="n">percent_radius_spar_plate</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)</span> <span class="o">-</span> <span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">d</span><span class="p">[(</span><span class="n">s</span><span class="o">-</span><span class="mi">1</span><span class="p">)]</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span><span class="p">))))</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">GWing</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">mass_rib_plate_TE</span> <span class="o">=</span> <span class="n">RHO_BALSA</span> <span class="o">*</span> <span class="p">(</span><span class="n">thickness_TE_plate</span> <span class="o">*</span> <span class="p">((</span><span class="mf">1.0</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">c</span><span class="p">[(</span><span class="n">s</span><span class="o">-</span><span class="mi">1</span><span class="p">)]</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="n">percent_height_TE_plate</span> <span class="o">*</span> <span class="n">percent_length_TE_plate</span><span class="p">))</span>
                <span class="n">mass_rib</span> <span class="o">=</span> <span class="n">AF_ribs</span> <span class="o">*</span> <span class="p">((</span><span class="n">dy</span><span class="p">[(</span><span class="n">s</span><span class="o">-</span><span class="mi">1</span><span class="p">)]</span> <span class="o">/</span> <span class="n">rib_spacing</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">mass_rib_foam</span> <span class="o">+</span> <span class="n">mass_rib_caps</span> <span class="o">+</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">mass_rib_plate_spar</span> <span class="o">+</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">mass_rib_plate_TE</span><span class="p">))</span>
                <span class="n">Xcg_rib</span> <span class="o">=</span> <span class="n">XCG_AIRFOIL</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">mass_rib</span> <span class="o">=</span> <span class="n">AF_ribs</span> <span class="o">*</span> <span class="p">(</span><span class="mf">0.66</span><span class="p">)</span> <span class="o">*</span> <span class="p">((</span><span class="n">dy</span><span class="p">[(</span><span class="n">s</span><span class="o">-</span><span class="mi">1</span><span class="p">)]</span> <span class="o">/</span> <span class="n">rib_spacing</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">mass_rib_foam</span> <span class="o">+</span> <span class="n">mass_rib_caps</span> <span class="o">+</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">mass_rib_plate_spar</span><span class="p">))</span>
                <span class="n">Xcg_rib</span> <span class="o">=</span> <span class="p">((</span><span class="n">XCG_AIRFOIL</span> <span class="o">+</span> <span class="p">(</span><span class="mf">2.0</span> <span class="o">/</span> <span class="mi">3</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">spar_location</span><span class="p">))</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>

            <span class="c"># Trailing Edge Mass &amp; Xcg</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">GWing</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">mass_TE</span> <span class="o">=</span> <span class="n">AF_TE</span> <span class="o">*</span> <span class="p">(</span><span class="n">RHO_STRUCTURAL_FOAM</span> <span class="o">*</span> <span class="n">dy</span><span class="p">[(</span><span class="n">s</span><span class="o">-</span><span class="mi">1</span><span class="p">)]</span> <span class="o">*</span> <span class="p">((</span><span class="mf">1.0</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">length_TE_foam</span> <span class="o">*</span> <span class="n">height_TE_foam</span><span class="p">))</span> <span class="o">+</span> <span class="n">RHO_KEVLAR</span> <span class="o">*</span> <span class="n">dy</span><span class="p">[(</span><span class="n">s</span><span class="o">-</span><span class="mi">1</span><span class="p">)]</span> <span class="o">*</span> <span class="n">T_PLY_KEVLAR</span> <span class="o">*</span> <span class="p">(</span><span class="n">length_TE_foam</span> <span class="o">+</span> <span class="n">height_TE_foam</span> <span class="o">+</span> <span class="n">sqrt</span><span class="p">(</span><span class="n">length_TE_foam</span> <span class="o">**</span> <span class="mi">2</span> <span class="o">+</span> <span class="n">height_TE_foam</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)))</span>
                <span class="n">Xcg_TE</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">c</span><span class="p">[(</span><span class="n">s</span><span class="o">-</span><span class="mi">1</span><span class="p">)]</span> <span class="o">-</span> <span class="p">(</span><span class="mf">2.0</span> <span class="o">/</span> <span class="mi">3</span><span class="p">)</span> <span class="o">*</span> <span class="n">length_TE_foam</span><span class="p">)</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">c</span><span class="p">[(</span><span class="n">s</span><span class="o">-</span><span class="mi">1</span><span class="p">)]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">mass_TE</span> <span class="o">=</span> <span class="n">RHO_STEEL_WIRE</span> <span class="o">*</span> <span class="n">dy</span><span class="p">[(</span><span class="n">s</span><span class="o">-</span><span class="mi">1</span><span class="p">)]</span> <span class="o">*</span> <span class="n">pi</span> <span class="o">*</span> <span class="p">((</span><span class="n">diameter_piano_wire</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)</span>
                <span class="n">Xcg_TE</span> <span class="o">=</span> <span class="mi">1</span>

            <span class="c"># Leading Edge Sheeting Mass</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">GWing</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">mass_LE_sheeting</span> <span class="o">=</span> <span class="n">AF_leading_edge_sheeting</span> <span class="o">*</span> <span class="p">(</span><span class="n">RHO_XPS</span> <span class="o">*</span> <span class="n">dy</span><span class="p">[(</span><span class="n">s</span><span class="o">-</span><span class="mi">1</span><span class="p">)]</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">c</span><span class="p">[(</span><span class="n">s</span><span class="o">-</span><span class="mi">1</span><span class="p">)]</span> <span class="o">*</span> <span class="p">(</span><span class="n">percent_LE_sheeting_top</span> <span class="o">+</span> <span class="n">percent_LE_sheeting_bottom</span><span class="p">)</span> <span class="o">*</span> <span class="n">PERIMETER_AIRFOIL</span> <span class="o">*</span> <span class="n">thickness_LE_sheeting</span><span class="p">)</span>
                <span class="n">Xcg_LE_sheeting</span> <span class="o">=</span> <span class="p">(</span><span class="mf">1.0</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="p">((</span><span class="mf">1.0</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">percent_LE_sheeting_top</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="mf">1.0</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">percent_LE_sheeting_bottom</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">mass_LE_sheeting</span> <span class="o">=</span> <span class="n">AF_leading_edge_sheeting_GWing</span> <span class="o">*</span> <span class="p">(</span><span class="n">RHO_EPS</span> <span class="o">*</span> <span class="n">dy</span><span class="p">[(</span><span class="n">s</span><span class="o">-</span><span class="mi">1</span><span class="p">)]</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">c</span><span class="p">[(</span><span class="n">s</span><span class="o">-</span><span class="mi">1</span><span class="p">)]</span> <span class="o">*</span> <span class="p">(</span><span class="n">percent_LE_sheeting_top_GWing</span><span class="p">[(</span><span class="n">s</span><span class="o">-</span><span class="mi">1</span><span class="p">)]</span> <span class="o">+</span> <span class="n">percent_LE_sheeting_bottom</span><span class="p">)</span> <span class="o">*</span> <span class="n">PERIMETER_AIRFOIL</span> <span class="o">*</span> <span class="n">thickness_LE_sheeting</span><span class="p">)</span> <span class="o">+</span> <span class="n">RHO_STEEL_WIRE</span> <span class="o">*</span> <span class="n">dy</span><span class="p">[(</span><span class="n">s</span><span class="o">-</span><span class="mi">1</span><span class="p">)]</span> <span class="o">*</span> <span class="n">pi</span> <span class="o">*</span> <span class="p">((</span><span class="n">diameter_piano_wire</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)</span>
                <span class="n">Xcg_LE_sheeting</span> <span class="o">=</span> <span class="p">(</span><span class="mf">1.0</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="p">((</span><span class="mf">1.0</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">percent_LE_sheeting_top_GWing</span><span class="p">[(</span><span class="n">s</span><span class="o">-</span><span class="mi">1</span><span class="p">)])</span> <span class="o">+</span> <span class="p">(</span><span class="mf">1.0</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">percent_LE_sheeting_bottom</span><span class="p">))</span>

            <span class="c"># Covering Mass (Mylar, use perimeter estimates from HPO airfoils)</span>
            <span class="n">mass_covering</span> <span class="o">=</span> <span class="n">AF_covering</span> <span class="o">*</span> <span class="p">(</span><span class="n">RHO_MYLAR</span> <span class="o">*</span> <span class="n">dy</span><span class="p">[(</span><span class="n">s</span><span class="o">-</span><span class="mi">1</span><span class="p">)]</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">c</span><span class="p">[(</span><span class="n">s</span><span class="o">-</span><span class="mi">1</span><span class="p">)]</span> <span class="o">*</span> <span class="n">PERIMETER_AIRFOIL</span> <span class="o">*</span> <span class="n">T_MYLAR</span><span class="p">)</span>
            <span class="n">Xcg_covering</span> <span class="o">=</span> <span class="mf">0.5</span>

            <span class="c"># Trailing Edge Spar and In-Plane Truss Mass &amp; Xcg (TE Spar, Kevlar cross-bracing, compression members)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">GWing</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">mass_TE_spar</span> <span class="o">=</span> <span class="n">AF_TE_spar</span> <span class="o">*</span> <span class="p">(</span><span class="n">RHO_CARBON</span> <span class="o">*</span> <span class="n">dy</span><span class="p">[(</span><span class="n">s</span><span class="o">-</span><span class="mi">1</span><span class="p">)]</span> <span class="o">*</span> <span class="p">(</span><span class="n">pi</span> <span class="o">*</span> <span class="p">(((</span><span class="n">d_TE_spar</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="n">nTube_TE_spar</span> <span class="o">*</span> <span class="n">T_PLY_CARBON</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span> <span class="o">-</span> <span class="p">(</span><span class="n">d_TE_spar</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)))</span>
                <span class="n">Xcg_TE_spar</span> <span class="o">=</span> <span class="mf">0.9</span>
                <span class="n">mass_comp_member</span> <span class="o">=</span> <span class="n">AF_comp_member</span> <span class="o">*</span> <span class="p">(</span><span class="n">dy</span><span class="p">[(</span><span class="n">s</span><span class="o">-</span><span class="mi">1</span><span class="p">)]</span> <span class="o">/</span> <span class="n">spacing_comp_member</span><span class="p">)</span> <span class="o">*</span> <span class="n">RHO_CARBON</span> <span class="o">*</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">c</span><span class="p">[(</span><span class="n">s</span><span class="o">-</span><span class="mi">1</span><span class="p">)]</span> <span class="o">*</span> <span class="n">percent_length_comp_member</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">pi</span> <span class="o">*</span> <span class="p">(((</span><span class="n">d_comp_member</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="n">nTube_comp_member</span> <span class="o">*</span> <span class="n">T_PLY_CARBON</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span> <span class="o">-</span> <span class="p">(</span><span class="n">d_comp_member</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span><span class="p">))</span>
                <span class="n">Xcg_comp_member</span> <span class="o">=</span> <span class="mf">0.25</span> <span class="o">+</span> <span class="p">(</span><span class="mf">1.0</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">percent_length_comp_member</span><span class="p">)</span>
                <span class="n">mass_cross_bracing</span> <span class="o">=</span> <span class="n">AF_cross_bracing</span> <span class="o">*</span> <span class="n">RHO_KEVLAR</span> <span class="o">*</span> <span class="p">(</span><span class="n">dy</span><span class="p">[(</span><span class="n">s</span><span class="o">-</span><span class="mi">1</span><span class="p">)]</span> <span class="o">/</span> <span class="n">spacing_comp_member</span><span class="p">)</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">*</span> <span class="p">(</span><span class="n">pi</span> <span class="o">*</span> <span class="p">(</span><span class="n">d_cross_bracing</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="p">((((</span><span class="bp">self</span><span class="o">.</span><span class="n">c</span><span class="p">[(</span><span class="n">s</span><span class="o">-</span><span class="mi">1</span><span class="p">)]</span> <span class="o">*</span> <span class="n">percent_length_comp_member</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="p">((</span><span class="n">spacing_comp_member</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span><span class="p">))</span> <span class="o">**</span> <span class="p">(</span><span class="mf">1.0</span> <span class="o">/</span> <span class="mi">2</span><span class="p">))</span>
                <span class="n">Xcg_cross_bracing</span> <span class="o">=</span> <span class="mf">0.25</span> <span class="o">+</span> <span class="p">(</span><span class="mf">1.0</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">percent_length_comp_member</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">mass_TE_spar</span> <span class="o">=</span> <span class="mi">0</span>
                <span class="n">Xcg_TE_spar</span> <span class="o">=</span> <span class="mi">0</span>
                <span class="n">mass_comp_member</span> <span class="o">=</span> <span class="mi">0</span>
                <span class="n">Xcg_comp_member</span> <span class="o">=</span> <span class="mi">0</span>
                <span class="n">mass_cross_bracing</span> <span class="o">=</span> <span class="mi">0</span>
                <span class="n">Xcg_cross_bracing</span> <span class="o">=</span> <span class="mi">0</span>

            <span class="c"># Total Chord Mass</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">mChord</span><span class="p">[(</span><span class="n">s</span><span class="o">-</span><span class="mi">1</span><span class="p">)]</span> <span class="o">=</span> <span class="n">mass_rib</span> <span class="o">+</span> <span class="n">mass_TE</span> <span class="o">+</span> <span class="p">(</span><span class="n">mass_LE_sheeting</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="n">mass_covering</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="n">mass_TE_spar</span> <span class="o">+</span> <span class="n">mass_comp_member</span> <span class="o">+</span> <span class="n">mass_cross_bracing</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">xCGChord</span><span class="p">[(</span><span class="n">s</span><span class="o">-</span><span class="mi">1</span><span class="p">)]</span> <span class="o">=</span> <span class="p">((</span><span class="n">mass_rib</span> <span class="o">*</span> <span class="n">Xcg_rib</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="n">mass_TE</span> <span class="o">*</span> <span class="n">Xcg_TE</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="n">mass_LE_sheeting</span> <span class="o">*</span> <span class="n">Xcg_LE_sheeting</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="n">mass_covering</span> <span class="o">*</span> <span class="n">Xcg_covering</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="n">mass_TE_spar</span> <span class="o">*</span> <span class="n">Xcg_TE_spar</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="n">mass_comp_member</span> <span class="o">*</span> <span class="n">Xcg_comp_member</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="n">mass_cross_bracing</span> <span class="o">*</span> <span class="n">Xcg_cross_bracing</span><span class="p">))</span> <span class="o">/</span> <span class="p">(</span><span class="n">mass_rib</span> <span class="o">+</span> <span class="n">mass_TE</span> <span class="o">+</span> <span class="n">mass_LE_sheeting</span> <span class="o">+</span> <span class="n">mass_covering</span> <span class="o">+</span> <span class="n">mass_TE_spar</span> <span class="o">+</span> <span class="n">mass_comp_member</span> <span class="o">+</span> <span class="n">mass_cross_bracing</span><span class="p">)</span></div></div>
</pre></div>

          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li><a href="../../index.html">Atlas 0.1 documentation</a> &raquo;</li>
          <li><a href="../index.html" >Module code</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright .
      Last updated on Aug 18, 2014.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.2.
    </div>
  </body>
</html>